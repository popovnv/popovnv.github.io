<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Сборка документации</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Документация по PostgreSQL 9.4.1"
HREF="index.html"><LINK
REL="UP"
TITLE="Документация"
HREF="docguide.html"><LINK
REL="PREVIOUS"
TITLE="Инструментарий"
HREF="docguide-toolsets.html"><LINK
REL="NEXT"
TITLE="Написание документации"
HREF="docguide-authoring.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"><META
NAME="creation"
CONTENT="2016-04-12T07:56:57"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Документация по PostgreSQL 9.4.1</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Инструментарий"
HREF="docguide-toolsets.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="docguide.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Приложение I. Документация</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Написание документации"
HREF="docguide-authoring.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="DOCGUIDE-BUILD"
>I.3. Сборка документации</A
></H1
><P
>Завершив все подготовительные действия, перейдите в каталог <TT
CLASS="FILENAME"
>doc/src/sgml</TT
> и запустите одну из команд сборки, описанных в следующих подразделах. (Помните, что для сборки нужно использовать GNU make.)</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128610"
>I.3.1. HTML</A
></H2
><P
>Чтобы собрать <ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>-версию документации: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make html</KBD
></PRE
><P> Эта цель сборки также выбирается по умолчанию. Результат помещается в подкаталог <TT
CLASS="FILENAME"
>html</TT
>.</P
><P
>Чтобы был сформирован алфавитный указатель, во время сборки требуется выполнить несколько проходов. Если этот указатель вам не нужен, вы просто хотите проверить результат, используйте режим <TT
CLASS="LITERAL"
>draft</TT
>: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make draft</KBD
></PRE
><P></P
><P
>Чтобы получить документацию в виде одной HTML-страницы, выполните: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make postgres.html</KBD
></PRE
><P></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128627"
>I.3.2. Страницы man</A
></H2
><P
>Для преобразования страниц <SPAN
CLASS="PRODUCTNAME"
>DocBook</SPAN
>
   <CODE
CLASS="SGMLTAG"
>refentry</CODE
> в формат *roff, подходящий для страниц man, мы используем стили DocBook XSL. Страницы man распространяются в архиве tar, подобно <ACRONYM
CLASS="ACRONYM"
>HTML</ACRONYM
>-версии. Чтобы создать страницы man, выполните: </P><PRE
CLASS="PROGRAMLISTING"
>cd doc/src/sgml
make man</PRE
><P></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128634"
>I.3.3. Получение печатной версии с использованием <SPAN
CLASS="APPLICATION"
>JadeTeX</SPAN
></A
></H2
><P
>Если вы хотите получить печатную версию документации, используя <SPAN
CLASS="APPLICATION"
>JadeTex</SPAN
>, вы можете воспользоваться одной из следующих команд: <P
></P
></P><UL
><LI
><P
>Чтобы получить PostScript через <ACRONYM
CLASS="ACRONYM"
>DVI</ACRONYM
> для формата A4, выполните: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make postgres-A4.ps</KBD
></PRE
><P> Для формата &laquo;U.S. Letter&raquo; выполните: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make postgres-US.ps</KBD
></PRE
><P></P
></LI
><LI
><P
>Чтобы получить <ACRONYM
CLASS="ACRONYM"
>PDF</ACRONYM
>: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make postgres-A4.pdf</KBD
></PRE
><P> или: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make postgres-US.pdf</KBD
></PRE
><P> (Разумеется, вы можете получить <ACRONYM
CLASS="ACRONYM"
>PDF</ACRONYM
> и из PostScript, но если сгенерировать <ACRONYM
CLASS="ACRONYM"
>PDF</ACRONYM
> напрямую, полученный файл будет содержать гиперссылки и другие расширенные особенности.)</P
></LI
></UL
><P></P
><P
>Если вы намерены использовать JadeTeX для сборки документации PostgreSQL, вам, вероятно, потребуется увеличить некоторые внутренние параметры TeX. Их можно задать в файле <TT
CLASS="FILENAME"
>texmf.cnf</TT
>. На момент написания этого описания работали следующие параметры: </P><PRE
CLASS="PROGRAMLISTING"
>hash_extra.jadetex  = 200000
hash_extra.pdfjadetex  = 200000
pool_size.jadetex = 2000000
pool_size.pdfjadetex = 2000000
string_vacancies.jadetex = 150000
string_vacancies.pdfjadetex = 150000
max_strings.jadetex = 300000
max_strings.pdfjadetex = 300000
save_size.jadetex = 15000
save_size.pdfjadetex = 15000</PRE
><P></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128663"
>I.3.4. Переполнение текста</A
></H2
><P
>В некоторых местах текст документации оказывается слишком широким для предопределённых границ, и, в особых случаях, не умещается на странице. В частности, это наблюдается с широкими таблицами или текстом, не допускающим переносы. Сталкиваясь с такой ситуацией, TeX выводит сообщения <SPAN
CLASS="QUOTE"
>"Overfull hbox"</SPAN
> (Переполнение горизонтальной рамки) в файл журнала, например, <TT
CLASS="FILENAME"
>postgres-US.log</TT
> или <TT
CLASS="FILENAME"
>postgres-A4.log</TT
>. С учётом того, что дюйм составляют 72 точки, всё, что выходит за границу больше чем на 72 точки, скорее всего не поместится на печатаемой странице (при размере поля один дюйм). Чтобы найти в <ACRONYM
CLASS="ACRONYM"
>SGML</ACRONYM
> текст, выходящий за границы, определите номер страницы, указанный над сообщением о переполнении, например: <TT
CLASS="LITERAL"
>[50 ###]</TT
> (стр. 50), и посмотрите на следующую страницу (в данном случае, стр. 51) в <ACRONYM
CLASS="ACRONYM"
>PDF</ACRONYM
>. Увидев, какой текст на ней выходит за границы, внесите требуемые коррективы в <ACRONYM
CLASS="ACRONYM"
>SGML</ACRONYM
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128673"
>I.3.5. Получение печатной версии из <ACRONYM
CLASS="ACRONYM"
>RTF</ACRONYM
></A
></H2
><P
>Вы также можете получить печатную версию документации <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, преобразовав её в формат <ACRONYM
CLASS="ACRONYM"
>RTF</ACRONYM
>, который позволяет откорректировать форматирование в офисном пакете. В зависимости от возможностей конкретного текстового редактора, затем документацию можно будет преобразовать в PostScript или <ACRONYM
CLASS="ACRONYM"
>PDF</ACRONYM
>. Ниже описывается, как это можно проделать с применением <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>.</P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>Судя по всему, текущие версии документации <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> провоцируют ошибку или превышают ограничения размера, существующие в OpenJade. Если у вас процесс сборки <ACRONYM
CLASS="ACRONYM"
>RTF</ACRONYM
> &laquo;зависает&raquo; на долгое время, а размер выводимого файла остаётся нулевым, возможно, вы столкнулись именно с этой проблемой. (Но учтите, что обычная сборка занимает от 5 до 10 минут, так что не прерывайте процесс слишком быстро.)</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="PROCEDURE"
><P
><B
>Очистка <ACRONYM
CLASS="ACRONYM"
>RTF</ACRONYM
> в <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
></B
></P
><P
><SPAN
CLASS="APPLICATION"
>OpenJade</SPAN
> опускает указание стиля по умолчанию для основного текста. В прошлом, пока это не было обнаружено, генерация оглавления документации выполнялась очень долго. Однако, благодаря помощи разработчиков <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>, мы смогли диагностировать эту проблему и найти обходное решение.</P
><OL
TYPE="1"
><LI
CLASS="STEP"
><P
>Получите <ACRONYM
CLASS="ACRONYM"
>RTF</ACRONYM
>-версию документации, введя: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make postgres.rtf</KBD
></PRE
><P></P
></LI
><LI
CLASS="STEP"
><P
>Исправьте файл RTF, чтобы в нём корректно указывались все стили, в частности, стиль по умолчанию. Если документ содержит разделы <CODE
CLASS="SGMLTAG"
>refentry</CODE
>, нужно также заменить указания форматирования, связывающие предыдущий абзац с текущим, на указания, связывающие текущий абзац со следующим. Для внесения этих корректив предоставляется утилита <TT
CLASS="COMMAND"
>fixrtf</TT
> (она находится в <TT
CLASS="FILENAME"
>doc/src/sgml</TT
>): </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>./fixrtf --refentry postgres.rtf</KBD
></PRE
><P></P
><P
>Этот скрипт добавляет в документ <TT
CLASS="LITERAL"
>{\s0 Normal;}</TT
> в качестве нулевого стиля. По утверждению разработчиков <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>, стандарт RTF не должен допускать добавления неявного нулевого стиля, хотя Microsoft Word обрабатывает это указание. Для исправления разделов <CODE
CLASS="SGMLTAG"
>refentry</CODE
> этот скрипт заменяет теги <TT
CLASS="LITERAL"
>\keepn</TT
> на <TT
CLASS="LITERAL"
>\keep</TT
>.</P
></LI
><LI
CLASS="STEP"
><P
>Создайте новый документ в <SPAN
CLASS="PRODUCTNAME"
>Applixware Words</SPAN
>, а затем импортируйте в него файл <ACRONYM
CLASS="ACRONYM"
>RTF</ACRONYM
>.</P
></LI
><LI
CLASS="STEP"
><P
>Создайте оглавление с помощью <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>.</P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
CLASS="STEP"
><P
>Выделите строки существующего оглавления, от первого символа первой строки до последнего символа последней строки.</P
></LI
><LI
CLASS="STEP"
><P
>Постройте новое оглавление, выбрав в меню <SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Book Building</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Create Table of Contents</SPAN
> (<SPAN
CLASS="GUIMENU"
>Сервис</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Сборка книги</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Создать оглавление</SPAN
>). Выберите первые три уровня заголовков для включения в оглавление. В результате строки оглавления, импортированные из RTF, будут заменены оглавлением, созданным в <SPAN
CLASS="PRODUCTNAME"
>Applixware</SPAN
>.</P
></LI
><LI
CLASS="STEP"
><P
>Поправьте форматирование оглавления, выбрав пункт меню <SPAN
CLASS="GUIMENU"
>Format</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Style</SPAN
> (<SPAN
CLASS="GUIMENU"
>Формат</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Стиль</SPAN
>), и определив следующие значения отступов (<TT
CLASS="LITERAL"
>First</TT
> (Первый) и <TT
CLASS="LITERAL"
>Left</TT
> (Слева)) для каждого из трёх стилей оглавления: <DIV
CLASS="INFORMALTABLE"
><P
></P
><A
NAME="AEN128743"
></A
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>Стиль</TH
><TH
>Первый отступ (в дюймах)</TH
><TH
>Отступ слева (в дюймах)</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="LITERAL"
>TOC-Heading 1</TT
></TD
><TD
><TT
CLASS="LITERAL"
>0.4</TT
></TD
><TD
><TT
CLASS="LITERAL"
>0.4</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>TOC-Heading 2</TT
></TD
><TD
><TT
CLASS="LITERAL"
>0.8</TT
></TD
><TD
><TT
CLASS="LITERAL"
>0.8</TT
></TD
></TR
><TR
><TD
><TT
CLASS="LITERAL"
>TOC-Heading 3</TT
></TD
><TD
><TT
CLASS="LITERAL"
>1.2</TT
></TD
><TD
><TT
CLASS="LITERAL"
>1.2</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></LI
></OL
></LI
><LI
CLASS="STEP"
><P
>Проработайте форматирование документа: <P
></P
></P><UL
><LI
><P
>Расставьте разрывы страниц.</P
></LI
><LI
><P
>Поправьте ширину колонок таблиц.</P
></LI
></UL
><P></P
></LI
><LI
CLASS="STEP"
><P
>Замените выравненные по правому краю номера страниц в части оглавления Примеры и Рисунки правильными значениями. Это должно занять всего несколько минут.</P
></LI
><LI
CLASS="STEP"
><P
>Удалите из документа раздел алфавитного указателя, если он пуст.</P
></LI
><LI
CLASS="STEP"
><P
>Сгенерируйте заново и скорректируйте оглавление.</P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
CLASS="STEP"
><P
>Выделите поле оглавления.</P
></LI
><LI
CLASS="STEP"
><P
>Выберите в меню <SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Book Building</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Create Table of Contents</SPAN
> (<SPAN
CLASS="GUIMENU"
>Сервис</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Сборка книги</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Создать оглавление</SPAN
>).</P
></LI
><LI
CLASS="STEP"
><P
>Отделите оглавление, выбрав в меню <SPAN
CLASS="GUIMENU"
>Tools</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Field Editing</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Unprotect</SPAN
> (<SPAN
CLASS="GUIMENU"
>Сервис</SPAN
>-&gt;<SPAN
CLASS="GUISUBMENU"
>Изменение полей</SPAN
>-&gt;<SPAN
CLASS="GUIMENUITEM"
>Снять защиту</SPAN
>).</P
></LI
><LI
CLASS="STEP"
><P
>Удалите первую строку в оглавлении, которая указывает на само оглавление.</P
></LI
></OL
></LI
><LI
CLASS="STEP"
><P
>Сохраните документ в специальном формате <SPAN
CLASS="PRODUCTNAME"
>Applixware Words</SPAN
>, чтобы в него можно было легко внести последние правки.</P
></LI
><LI
CLASS="STEP"
><P
><SPAN
CLASS="QUOTE"
>"Напечатайте"</SPAN
> документ в файл формата PostScript.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128816"
>I.3.6. Простые текстовые файлы</A
></H2
><P
>Инструкции по установке также распространяются в виде обычного текста, на случай, если они понадобятся в ситуации, когда под рукой не окажется средств просмотра более удобного формата. Файл <TT
CLASS="FILENAME"
>INSTALL</TT
> соответствует <A
HREF="installation.html"
>Главе 15</A
>, с небольшими изменениями, внесёнными с учётом другого контекста. Чтобы пересоздать этот файл, перейдите в каталог <TT
CLASS="FILENAME"
>doc/src/sgml</TT
> и введите <KBD
CLASS="USERINPUT"
>make INSTALL</KBD
>.</P
><P
>В прошлом примечания к выпуску и инструкции по регрессионному тестированию также распространялись в виде простых текстовых файлов, но эта практика была прекращена.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN128824"
>I.3.7. Проверка синтаксиса</A
></H2
><P
>Сборка всей документации может занять много времени. Но если нужно проверить только синтаксис файлов документации, это можно сделать всего за несколько секунд: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>doc/src/sgml$ </SAMP
><KBD
CLASS="USERINPUT"
>make check</KBD
></PRE
><P></P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="docguide-toolsets.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="docguide-authoring.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Инструментарий</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="docguide.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Написание документации</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>