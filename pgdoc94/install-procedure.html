<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Процедура установки</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Документация по PostgreSQL 9.4.1"
HREF="index.html"><LINK
REL="UP"
TITLE="Установка из исходного кода"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="Получение исходного кода"
HREF="install-getsource.html"><LINK
REL="NEXT"
TITLE="Действия после установки"
HREF="install-post.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"><META
NAME="creation"
CONTENT="2016-04-12T07:56:57"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Документация по PostgreSQL 9.4.1</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Получение исходного кода"
HREF="install-getsource.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Глава 15. Установка из исходного кода</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Действия после установки"
HREF="install-post.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALL-PROCEDURE"
>15.4. Процедура установки</A
></H1
><DIV
CLASS="PROCEDURE"
><OL
TYPE="1"
><LI
CLASS="STEP"
><A
NAME="CONFIGURE"
></A
><P
><B
>Конфигурирование</B
></P
><P
>На первом шаге установки требуется сконфигурировать дерево установки для вашей системы и выбрать желаемые параметры сборки. Для этого нужно запустить скрипт <TT
CLASS="FILENAME"
>configure</TT
>. Чтобы выполнить стандартную сборку, просто введите: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>./configure</KBD
></PRE
><P> Этот скрипт проведёт несколько проверок с целью определить значения для различных переменных, зависящих от системы, и выявить любые странности вашей ОС, а затем создаст несколько файлов в дереве сборки, в которых отразит полученные результаты. Вы также можете выполнить <TT
CLASS="FILENAME"
>configure</TT
> вне дерева исходного кода, если хотите сохранить каталог сборки отдельно. Эта процедура также называется сборкой с <I
CLASS="FIRSTTERM"
>VPATH</I
>. Выполняется она так: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>mkdir build_dir</KBD
>
<KBD
CLASS="USERINPUT"
>cd build_dir</KBD
>
<KBD
CLASS="USERINPUT"
>/путь/к/каталогу/исходного/кода/configure [параметры]</KBD
>
<KBD
CLASS="USERINPUT"
>make</KBD
></PRE
><P></P
><P
>В стандартной конфигурации собираются сервер и утилиты, а также клиентские приложения и интерфейсы, которым требуется только компилятор C. Все файлы по умолчанию устанавливаются в <TT
CLASS="FILENAME"
>/usr/local/pgsql</TT
>.</P
><P
>Вы можете настроить процесс сборки и установки, передав <TT
CLASS="FILENAME"
>configure</TT
> один или несколько следующих параметров командной строки: <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>--prefix=<TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
></TT
></DT
><DD
><P
>Разместить все файлы внутри каталога <TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
>, а не в <TT
CLASS="FILENAME"
>/usr/local/pgsql</TT
>. Собственно файлы будут установлены в различные подкаталоги этого каталога; в самом каталоге <TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
> никакие файлы не размещаются.</P
><P
>Если у вас есть особые требования, вы также можете изменить отдельные подкаталоги, определив следующие параметры. Однако, если вы оставите для них значения по умолчанию, инсталляция будет перемещаемой, то есть вы сможете переместить каталог после установки. (Это не распространяется на каталоги <TT
CLASS="LITERAL"
>man</TT
> и <TT
CLASS="LITERAL"
>doc</TT
>.)</P
><P
>Для перемещаемых инсталляций можно передать <TT
CLASS="FILENAME"
>configure</TT
> указание <TT
CLASS="LITERAL"
>--disable-rpath</TT
>. Кроме того, вы должны будете сказать операционной системе, как найти разделяемые библиотеки.</P
></DD
><DT
><TT
CLASS="OPTION"
>--exec-prefix=<TT
CLASS="REPLACEABLE"
><I
>ИСП-ПРЕФИКС</I
></TT
></TT
></DT
><DD
><P
>Вы можете установить архитектурно-зависимые файлы в размещение с другим префиксом, <TT
CLASS="REPLACEABLE"
><I
>ИСП-ПРЕФИКС</I
></TT
>, отличным от <TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
>. Это бывает полезно для совместного использования таких файлов несколькими системами. По умолчанию <TT
CLASS="REPLACEABLE"
><I
>ИСП-ПРЕФИКС</I
></TT
> считается равным <TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
> и все файлы, архитектурно-зависимые и независимые, устанавливаются в одно дерево каталогов, что вам скорее всего и нужно.</P
></DD
><DT
><TT
CLASS="OPTION"
>--bindir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт каталог для исполняемых двоичных программ. По умолчанию это <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>ИСП-ПРЕФИКС</I
></TT
>/bin</TT
>, что обычно означает <TT
CLASS="FILENAME"
>/usr/local/pgsql/bin</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--sysconfdir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт каталог для различных файлов конфигурации, <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
>/etc</TT
> по умолчанию.</P
></DD
><DT
><TT
CLASS="OPTION"
>--libdir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт каталог для установки библиотек и динамически загружаемых модулей. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>ИСП-ПРЕФИКС</I
></TT
>/lib</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--includedir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт каталог для установки заголовочных файлов C и C++. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
>/include</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--datarootdir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт корневой каталог для разного рода статических файлов. Этот параметр определяет только базу для некоторых из следующих параметров. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>ПРЕФИКС</I
></TT
>/share</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--datadir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт каталог для статических файлов данных, используемых установленными программами. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
></TT
>. Заметьте, что это совсем не тот каталог, в котором будут размещены файлы базы данных.</P
></DD
><DT
><TT
CLASS="OPTION"
>--localedir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт каталог для установки данных локализации, в частности, каталогов перевода сообщений. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
>/locale</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--mandir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Страницы man, поставляемые в составе <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, будут установлены в этот каталог, в соответствующие подкаталоги <TT
CLASS="FILENAME"
>man<TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
></TT
>. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
>/man</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--docdir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Задаёт корневой каталог для установки файлов документации, кроме страниц <SPAN
CLASS="QUOTE"
>"man"</SPAN
>. Этот параметр только определяет базу для следующих параметров. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
>/doc/postgresql</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--htmldir=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>В этот каталог будет помещена документация <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> в формате HTML. Значение по умолчанию — <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>DATAROOTDIR</I
></TT
></TT
>.</P
></DD
></DL
></DIV
><P>

     </P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>Чтобы <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> можно было установить в стандартные системные размещения (например, в <TT
CLASS="FILENAME"
>/usr/local/include</TT
>), не затрагивая пространство имён остальной системы, приняты определённые меры. Во-первых, к путям <TT
CLASS="VARNAME"
>datadir</TT
>, <TT
CLASS="VARNAME"
>sysconfdir</TT
> и <TT
CLASS="VARNAME"
>docdir</TT
> автоматически добавляется строка <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>/postgresql</TT
>"</SPAN
>, если только полный развёрнутый путь каталога уже не содержит строку <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>postgres</TT
>"</SPAN
> или <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>pgsql</TT
>"</SPAN
>. Так, если вы выберете в качестве префикса <TT
CLASS="FILENAME"
>/usr/local</TT
>, документация будет установлена в <TT
CLASS="FILENAME"
>/usr/local/doc/postgresql</TT
>, но с префиксом <TT
CLASS="FILENAME"
>/opt/postgres</TT
> она будет помещена в <TT
CLASS="FILENAME"
>/opt/postgres/doc</TT
>. Внешние заголовочные файлы C для клиентских интерфейсов устанавливаются в <TT
CLASS="VARNAME"
>includedir</TT
>, не загрязняя пространство имён. Внутренние и серверные заголовочные файлы устанавливаются в частные подкаталоги внутри <TT
CLASS="VARNAME"
>includedir</TT
>. Чтобы узнать, как обращаться к заголовочным файлам того или иного интерфейса, обратитесь к документации этого интерфейса. Наконец, для динамически загружаемых модулей, если требуется, будет также создан частный подкаталог внутри <TT
CLASS="VARNAME"
>libdir</TT
>.</P
></BLOCKQUOTE
></DIV
><P></P
><P
>     <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>--with-extra-version=<TT
CLASS="REPLACEABLE"
><I
>СТРОКА</I
></TT
></TT
></DT
><DD
><P
>Заданная <TT
CLASS="REPLACEABLE"
><I
>СТРОКА</I
></TT
> добавляется к номеру версии PostgreSQL. Это можно использовать, например, чтобы двоичные файлы, собранные из промежуточных снимков Git или кода с дополнительными правками, отличались от стандартных дополнительной строкой в версии, например, содержащей идентификатор <TT
CLASS="COMMAND"
>git describe</TT
> или номер выпуска дистрибутивного пакета.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-includes=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГИ</I
></TT
></TT
></DT
><DD
><P
>Значение <TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГИ</I
></TT
> представляет список каталогов через двоеточие, которые будут просмотрены компилятором при поиске заголовочных файлов. Если дополнительные пакеты (например, GNU <SPAN
CLASS="APPLICATION"
>Readline</SPAN
>) установлены у вас в нестандартное расположение, вам придётся использовать этот параметр и, возможно, также добавить соответствующий параметр <TT
CLASS="OPTION"
>--with-libraries</TT
>.</P
><P
>Пример: <TT
CLASS="LITERAL"
>--with-includes=/opt/gnu/include:/usr/sup/include</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libraries=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГИ</I
></TT
></TT
></DT
><DD
><P
>Значение <TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГИ</I
></TT
> представляет список каталогов через двоеточие, в котором следует искать библиотеки. Возможно, вам потребуется использовать этот параметр (и соответствующий <TT
CLASS="OPTION"
>--with-includes</TT
>), если какие-то пакеты установлены у вас в нестандартное размещение.</P
><P
>Пример: <TT
CLASS="LITERAL"
>--with-libraries=/opt/gnu/lib:/usr/sup/lib</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-nls[<SPAN
CLASS="OPTIONAL"
>=<TT
CLASS="REPLACEABLE"
><I
>ЯЗЫКИ</I
></TT
></SPAN
>]</TT
></DT
><DD
><P
>Включает поддержку национальных языков (<ACRONYM
CLASS="ACRONYM"
>NLS</ACRONYM
>, Native Language Support), то есть возможность выводить сообщения программы не только на английском языке. Значение <TT
CLASS="REPLACEABLE"
><I
>ЯЗЫКИ</I
></TT
> представляет необязательный список кодов языков через пробел, поддержка которых вам нужна, например: <TT
CLASS="LITERAL"
>--enable-nls='de fr ru'</TT
>. (Пересечение заданного вами списка и множества действительно доступных переводов будет вычислено автоматически.) Если список не задаётся, устанавливаются все доступные переводы.</P
><P
>Для использования этой возможности вам потребуется реализация API <SPAN
CLASS="APPLICATION"
>Gettext</SPAN
>; см. выше.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-pgport=<TT
CLASS="REPLACEABLE"
><I
>НОМЕР</I
></TT
></TT
></DT
><DD
><P
>Задаёт <TT
CLASS="REPLACEABLE"
><I
>НОМЕР</I
></TT
> порта по умолчанию для сервера и клиентов. Стандартное значение — 5432. Этот порт всегда можно изменить позже, но если вы укажете другой номер здесь, и сервер, и клиенты будут скомпилированы с одним значением, что очень удобно. Обычно менять это значение имеет смысл, только если вы намерены запускать в одной системе несколько серверов <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-perl</TT
></DT
><DD
><P
>Включает поддержку языка <SPAN
CLASS="APPLICATION"
>PL/Perl</SPAN
> на стороне сервера.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-python</TT
></DT
><DD
><P
>Включает поддержку языка <SPAN
CLASS="APPLICATION"
>PL/Python</SPAN
> на стороне сервера.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-tcl</TT
></DT
><DD
><P
>Включает поддержку языка <SPAN
CLASS="APPLICATION"
>PL/Tcl</SPAN
> на стороне сервера.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-tclconfig=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>Tcl устанавливает файл <TT
CLASS="FILENAME"
>tclConfig.sh</TT
>, содержащий конфигурационные данные, необходимые для сборки модулей, взаимодействующих с Tcl. Этот файл обычно находится автоматически в известном размещении, но если вы хотите использовать другую версию Tcl, вы должны указать каталог, где искать этот файл.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-gssapi</TT
></DT
><DD
><P
>Включает поддержку аутентификации GSSAPI. На многих платформах подсистема GSSAPI (обычно входящая в состав Kerberos) устанавливается не в то размещение, которое просматривается по умолчанию (например, <TT
CLASS="FILENAME"
>/usr/include</TT
>, <TT
CLASS="FILENAME"
>/usr/lib</TT
>), так что помимо этого параметра вам придётся задать параметры <TT
CLASS="OPTION"
>--with-includes</TT
> и <TT
CLASS="OPTION"
>--with-libraries</TT
>. Скрипт <TT
CLASS="FILENAME"
>configure</TT
> проверит наличие необходимых заголовочных файлов и библиотек, чтобы убедиться в целостности инсталляции GSSAPI, прежде чем продолжить.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-krb-srvnam=<TT
CLASS="REPLACEABLE"
><I
>ИМЯ</I
></TT
></TT
></DT
><DD
><P
>Задаёт имя по умолчанию для субъекта-службы Kerberos, используемое GSSAPI (по умолчанию это <TT
CLASS="LITERAL"
>postgres</TT
>). Обычно менять его имеет смысл только в среде Windows, где оно должно быть задано в верхнем регистре (<TT
CLASS="LITERAL"
>POSTGRES</TT
>).</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-openssl</TT
></DT
><DD
><P
>Включает поддержку соединений <ACRONYM
CLASS="ACRONYM"
>SSL</ACRONYM
> (зашифрованных). Для этого необходимо установить пакет <SPAN
CLASS="PRODUCTNAME"
>OpenSSL</SPAN
>. Скрипт <TT
CLASS="FILENAME"
>configure</TT
> проверит наличие необходимых заголовочных файлов и библиотек, чтобы убедиться в целостности инсталляции <SPAN
CLASS="PRODUCTNAME"
>OpenSSL</SPAN
>, прежде чем продолжить.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-pam</TT
></DT
><DD
><P
>Включает поддержку <ACRONYM
CLASS="ACRONYM"
>PAM</ACRONYM
> (Pluggable Authentication Modules, подключаемых модулей аутентификации).</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-ldap</TT
></DT
><DD
><P
>Включает поддержку <ACRONYM
CLASS="ACRONYM"
>LDAP</ACRONYM
> для проверки подлинности и получения параметров соединения (за дополнительными сведениями обратитесь к <A
HREF="libpq-ldap.html"
>Разделу 31.17</A
> и <A
HREF="auth-methods.html#AUTH-LDAP"
>Подразделу 19.3.7</A
>). В Unix для этого нужно установить пакет <SPAN
CLASS="PRODUCTNAME"
>OpenLDAP</SPAN
>. В Windows используется стандартная библиотека <SPAN
CLASS="PRODUCTNAME"
>WinLDAP</SPAN
>. Скрипт <TT
CLASS="FILENAME"
>configure</TT
> проверит наличие необходимых заголовочных файлов и библиотек, чтобы убедиться в целостности инсталляции <SPAN
CLASS="PRODUCTNAME"
>OpenLDAP</SPAN
>, прежде чем продолжить.</P
></DD
><DT
><TT
CLASS="OPTION"
>--without-readline</TT
></DT
><DD
><P
>Запрещает использование библиотеки <SPAN
CLASS="APPLICATION"
>Readline</SPAN
> (а также <SPAN
CLASS="APPLICATION"
>libedit</SPAN
>). При этом отключается редактирование командной строки и история в <SPAN
CLASS="APPLICATION"
>psql</SPAN
>, так что этот вариант не рекомендуется.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libedit-preferred</TT
></DT
><DD
><P
>Отдаёт предпочтение библиотеке <SPAN
CLASS="APPLICATION"
>libedit</SPAN
> с лицензией BSD, а не <SPAN
CLASS="APPLICATION"
>Readline</SPAN
> (GPL). Этот параметр имеет значение, только если установлены обе библиотеки; по умолчанию в этом случае используется <SPAN
CLASS="APPLICATION"
>Readline</SPAN
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-bonjour</TT
></DT
><DD
><P
>Включает поддержку Bonjour. Для этого Bonjour должен поддерживаться самой операционной системой. Рекомендуется для OS X.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-uuid=<TT
CLASS="REPLACEABLE"
><I
>БИБЛИОТЕКА</I
></TT
></TT
></DT
><DD
><P
>Собрать модуль <A
HREF="uuid-ossp.html"
>uuid-ossp</A
> (предоставляющий функции для генерирования UUID), используя заданную библиотеку UUID.<TT
CLASS="REPLACEABLE"
><I
>БИБЛИОТЕКА</I
></TT
> может быть следующей:</P
><P
></P
><UL
><LI
><P
><TT
CLASS="OPTION"
>bsd</TT
>, чтобы использовались функции получения UUID, имеющиеся во FreeBSD, NetBSD и некоторых других системах на базе BSD</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>e2fs</TT
>, чтобы использовалась библиотека получения UUID, созданная в рамках проекта <TT
CLASS="LITERAL"
>e2fsprogs</TT
>; эта библиотека присутствует в большинстве систем Linux и OS X, также её можно найти и для других платформ.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>ossp</TT
>, чтобы использовалась библиотека <A
HREF="http://www.ossp.org/pkg/lib/uuid/"
TARGET="_top"
>OSSP UUID</A
></P
></LI
></UL
></DD
><DT
><TT
CLASS="OPTION"
>--with-ossp-uuid</TT
></DT
><DD
><P
>Устаревший вариант указания <TT
CLASS="LITERAL"
>--with-uuid=ossp</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libxml</TT
></DT
><DD
><P
>Собрать с libxml (включает поддержку SQL/XML). Для этого требуется libxml версии 2.6.23 или новее.</P
><P
>В составе libxml устанавливается программа <TT
CLASS="COMMAND"
>xml2-config</TT
>, с помощью которой можно получить требуемые параметры компилятора и компоновщика. PostgreSQL будет использовать её автоматически, если найдёт. Чтобы указать нестандартное размещение libxml, вы можете воспользоваться переменной окружения <TT
CLASS="ENVAR"
>XML2_CONFIG</TT
> и указать в ней путь к программе <TT
CLASS="COMMAND"
>xml2-config</TT
> нужной инсталляции, либо задать параметры <TT
CLASS="OPTION"
>--with-includes</TT
> и <TT
CLASS="OPTION"
>--with-libraries</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-libxslt</TT
></DT
><DD
><P
>Использовать libxslt при сборке модуля <A
HREF="xml2.html"
>xml2</A
>. Библиотека <SPAN
CLASS="APPLICATION"
>xml2</SPAN
> задействует её для выполнения XSL-преобразований XML.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-integer-datetimes</TT
></DT
><DD
><P
>Отключает применение 64-битных целых для хранения времени и интервалов, чтобы значения даты/времени хранились в виде чисел с плавающей точкой. Числа с плавающей точкой применялись для хранения дат/времени по умолчанию в <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> до версии 8.4, но сейчас этот вариант считается устаревшим, так как с ним не поддерживается точность до микросекунд во всём диапазоне значений <TT
CLASS="TYPE"
>timestamp</TT
>. Однако для хранения таких значений в целочисленном виде требуется поддержка целочисленного 64-битного типа. Поэтому прежний вариант может использоваться, когда такой тип не поддерживается или для совместимости с приложениями, написанными для предыдущих версий <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>. За дополнительными сведениями обратитесь к <A
HREF="datatype-datetime.html"
>Разделу 8.5</A
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-float4-byval</TT
></DT
><DD
><P
>Запрещает передачу типа float4 <SPAN
CLASS="QUOTE"
>"по значению"</SPAN
>, чтобы он передавался <SPAN
CLASS="QUOTE"
>"по ссылке"</SPAN
>. Это снижает быстродействие, но может быть необходимо для совместимости со старыми пользовательскими функциями на языке C, которые используют соглашение о вызовах <SPAN
CLASS="QUOTE"
>"версии 0"</SPAN
>. В качестве более долгосрочного решения лучше модернизировать такие функции, чтобы они использовали соглашение <SPAN
CLASS="QUOTE"
>"версии 1"</SPAN
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-float8-byval</TT
></DT
><DD
><P
>Запрещает передачу типа float8 <SPAN
CLASS="QUOTE"
>"по значению"</SPAN
>, чтобы он передавался <SPAN
CLASS="QUOTE"
>"по ссылке"</SPAN
>. Это снижает быстродействие, но может быть необходимо для совместимости со старыми пользовательскими функциями на языке C, которые используют соглашение о вызовах <SPAN
CLASS="QUOTE"
>"версии 0"</SPAN
>. В качестве более долгосрочного решения лучше модернизировать такие функции, чтобы они использовали соглашение <SPAN
CLASS="QUOTE"
>"версии 1"</SPAN
>. Заметьте, что этот параметр влияет не только на float8, но и на int8, а также некоторые другие типы, например timestamp. На 32-битных платформах параметр <TT
CLASS="OPTION"
>--disable-float8-byval</TT
> действует по умолчанию и задать <TT
CLASS="OPTION"
>--enable-float8-byval</TT
> нельзя.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-segsize=<TT
CLASS="REPLACEABLE"
><I
>РАЗМЕР_СЕГМЕНТА</I
></TT
></TT
></DT
><DD
><P
>Задаёт <I
CLASS="FIRSTTERM"
>размер сегмента</I
> (в гигабайтах). Сервер делит большие таблицы на несколько файлов в файловой системе, ограничивая размер каждого данным размером сегмента. Это позволяет обойти ограничения на размер файлов, существующие на многих платформах. Размер сегмента по умолчанию, 1 гигабайт, безопасен для всех поддерживаемых платформ. Если же ваша операционная система поддерживает <SPAN
CLASS="QUOTE"
>"большие файлы"</SPAN
> (а сегодня это поддерживают почти все), вы можете установить больший размер сегмента. Это позволит уменьшить число файловых дескрипторов, используемых при работе с очень большими таблицами. Но будьте осторожны, чтобы выбранное значение не превысило максимум, поддерживаемый вашей платформой и файловыми системами, которые вы будете применять. Возможно, допустимый размер файла будет ограничиваться и другими утилитами, которые вы захотите использовать, например <SPAN
CLASS="APPLICATION"
>tar</SPAN
>. Рекомендуется, хотя и не требуется, чтобы это значение было степенью 2. Заметьте, что при изменении значения требуется выполнить initdb.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-blocksize=<TT
CLASS="REPLACEABLE"
><I
>РАЗМЕР_БЛОКА</I
></TT
></TT
></DT
><DD
><P
>Задаёт <I
CLASS="FIRSTTERM"
>размер блока</I
> (в килобайтах). Эта величина будет единицей хранения и ввода/вывода данных таблиц. Значение по умолчанию, 8 килобайт, достаточно универсально; но в особых случаях может быть оправдан другой размер блока. Это значение должно быть степенью 2 от 1 до 32 (в килобайтах). Заметьте, что при изменении значения требуется выполнить initdb.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-wal-segsize=<TT
CLASS="REPLACEABLE"
><I
>РАЗМЕР_СЕГМЕНТА</I
></TT
></TT
></DT
><DD
><P
>Задаёт <I
CLASS="FIRSTTERM"
>размер сегмента WAL</I
> (в мегабайтах). Эта величина определяет размер каждого отдельного файла журнала WAL. Изменять этот размер бывает полезно для оптимизации фрагментации при трансляции журналов. Значение по умолчанию — 16 мегабайт. Значение должно задаваться степенью 2 от 1 до 64 (в мегабайтах). Заметьте, что при изменении значения требуется выполнить initdb.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-wal-blocksize=<TT
CLASS="REPLACEABLE"
><I
>РАЗМЕР_БЛОКА</I
></TT
></TT
></DT
><DD
><P
>Задаёт <I
CLASS="FIRSTTERM"
>размер блока WAL</I
> (в килобайтах) Эта величина будет единицей хранения и ввода/вывода записей WAL. Значение по умолчанию, 8 килобайт, достаточно универсально; но в особых случаях может быть оправдан другой размер блока. Это значение должно быть степенью 2 от 1 до 64 (в килобайтах). Заметьте, что при изменении значения требуется выполнить initdb.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-spinlocks</TT
></DT
><DD
><P
>Позволяет провести сборку, если <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> не может воспользоваться циклическими блокировками CPU на данной платформе. Отсутствие таких блокировок приводит к снижению производительности, поэтому использовать этот вариант следует, только если сборка прерывается и выдаётся сообщение, что ваша платформа эти блокировки не поддерживает. Если вы не можете собрать <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> на вашей платформе без этого указания, сообщите о данной проблеме разработчикам <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-thread-safety</TT
></DT
><DD
><P
>Отключает потокобезопасное поведение клиентских библиотек. При этом параллельные потоки программ на базе <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> и <SPAN
CLASS="APPLICATION"
>ECPG</SPAN
> не будут безопасно контролировать собственные дескрипторы соединений.</P
></DD
><DT
><TT
CLASS="OPTION"
>--with-system-tzdata=<TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
></TT
></DT
><DD
><P
>В <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> включена собственная база данных часовых поясов, необходимая для операций с датой и временем. На самом деле эта база данных совместима с базой часовых поясов IANA, поставляемой в составе многих операционных систем FreeBSD, Linux, Solaris, поэтому устанавливать её дополнительно может быть излишне. С этим параметром вместо базы данных, включённой в пакет исходного кода PostgreSQL, будет использоваться системная база данных часовых поясов, находящаяся в заданном <TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГЕ</I
></TT
>. <TT
CLASS="REPLACEABLE"
><I
>КАТАЛОГ</I
></TT
> должен задаваться абсолютным путём (в ряде операционных систем принят путь <TT
CLASS="FILENAME"
>/usr/share/zoneinfo</TT
>). Заметьте, что процедура установки не будет проверять несоответствия или ошибки в данных часовых поясов. Поэтому, используя этот параметр, рекомендуется выполнить регрессионные тесты, чтобы убедиться, что выбранная вами база данных часовых поясов работает корректно с <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>.</P
><P
>Этот параметр в основном предназначен для тех, кто собирает двоичные пакеты для дистрибутивов и хорошо знает свою операционную систему. Основной плюс от использования системных данных в том, что пакет PostgreSQL не придётся обновлять при изменениях местных определений часовых поясов. Ещё один плюс заключается в упрощении кросс-компиляции, так как при инсталляции не требуется собирать базу данных часовых поясов.</P
></DD
><DT
><TT
CLASS="OPTION"
>--without-zlib</TT
></DT
><DD
><P
> Запрещает использование библиотеки <SPAN
CLASS="APPLICATION"
>Zlib</SPAN
>. При этом отключается поддержка сжатых архивов утилитами <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
> и <SPAN
CLASS="APPLICATION"
>pg_restore</SPAN
>. Этот параметр предназначен только для тех редких систем, в которых нет этой библиотеки.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-debug</TT
></DT
><DD
><P
>Включает компиляцию всех программ и библиотек с отладочными символами. Это значит, что вы сможете запускать программы в отладчике для анализа проблем. При такой компиляции размер установленных исполняемых файлов значительно увеличивается, а компиляторы, кроме GCC, обычно отключают оптимизацию, что снижает быстродействие. Однако, наличие отладочных символов очень полезно при решении возможных проблем любой сложности. В настоящее время рекомендуется использовать этот параметр для производственной среды, только если применяется компилятор GCC. Но если вы занимаетесь разработкой или испытываете бета-версию, его следует использовать всегда.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-coverage</TT
></DT
><DD
><P
>При использовании GCC все программы и библиотеки компилируются с инструментарием, оценивающим покрытие кода тестами. В этом случае в каталоге сборки будут сформированы файлы с метриками покрытия кода. За дополнительными сведениями обратитесь к <A
HREF="regress-coverage.html"
>Разделу 30.5</A
>. Этот параметр предназначен только для GCC и только для тех, кто занимается разработкой.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-profiling</TT
></DT
><DD
><P
>При использовании GCC все программы и библиотеки компилируются так, чтобы их можно было профилировать. В результате по завершении серверного процесса будет создаваться подкаталог с файлом <TT
CLASS="FILENAME"
>gmon.out</TT
> для профилирования. Этот параметр предназначен только для GCC и только для тех, кто занимается разработкой.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-cassert</TT
></DT
><DD
><P
>Включает для сервера проверочные <I
CLASS="FIRSTTERM"
>утверждения</I
>, проверяющие множество условий, которые <SPAN
CLASS="QUOTE"
>"не должны происходить"</SPAN
>. Это бесценно в процессе разработке кода, но эти проверки могут значительно замедлить работу сервера. Кроме того, включение этих проверок не обязательно увеличит стабильность вашего сервера! Проверочные утверждения не категоризируются по важности, поэтому относительно безвредная ошибка может привести к перезапуску сервера, если утверждение не выполнится. Применять это следует, только если вы занимаетесь разработкой или испытываете бета-версию, но не в производственной среде.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-depend</TT
></DT
><DD
><P
>Включает автоматическое отслеживание зависимостей. С этим параметром скрипты Makefile настраиваются так, чтобы при изменении любого заголовочного файла пересобирались все зависимые объектные файлы. Это полезно в процессе разработки, но если вам нужно только скомпилировать и установить сервер, это будет лишней тратой времени. В настоящее время это работает только с GCC.</P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-dtrace</TT
></DT
><DD
><P
> Включает при компиляции <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> поддержку средства динамической трассировки DTrace. За дополнительными сведениями обратитесь к <A
HREF="dynamic-trace.html"
>Разделу 27.4</A
>.</P
><P
>Задать расположение программы <TT
CLASS="COMMAND"
>dtrace</TT
> можно в переменной окружения <TT
CLASS="ENVAR"
>DTRACE</TT
>. Часто это необходимо, потому что <TT
CLASS="COMMAND"
>dtrace</TT
> обычно устанавливается в каталог <TT
CLASS="FILENAME"
>/usr/sbin</TT
>, который может отсутствовать в пути поиска.</P
><P
>Дополнительные параметры командной строки для <TT
CLASS="COMMAND"
>dtrace</TT
> можно задать в переменной окружения <TT
CLASS="ENVAR"
>DTRACEFLAGS</TT
>. В Solaris, чтобы включить поддержку DTrace для 64-битной сборки, необходимо передать configure параметр <TT
CLASS="LITERAL"
>DTRACEFLAGS="-64"</TT
>. Например, с компилятором GCC: </P><PRE
CLASS="SCREEN"
>./configure CC='gcc -m64' --enable-dtrace DTRACEFLAGS='-64' ...</PRE
><P> С компилятором Sun: </P><PRE
CLASS="SCREEN"
>./configure CC='/opt/SUNWspro/bin/cc -xtarget=native64' --enable-dtrace DTRACEFLAGS='-64' ...</PRE
><P></P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-tap-tests</TT
></DT
><DD
><P
>Включает тесты по технологии Perl TAP. Для этого у вас должен быть установлен Perl и модуль <TT
CLASS="LITERAL"
>IPC::Run</TT
>. За дополнительными сведениями обратитесь к <A
HREF="regress-tap.html"
>Разделу 30.4</A
>.</P
></DD
></DL
></DIV
><P>
    </P
><P
>Если вы предпочитаете компилятор C, отличный от выбираемого скриптом <TT
CLASS="FILENAME"
>configure</TT
>, укажите его в переменной <TT
CLASS="ENVAR"
>CC</TT
>. По умолчанию <TT
CLASS="FILENAME"
>configure</TT
> выбирает <TT
CLASS="FILENAME"
>gcc</TT
> (если он находится) или стандартный компилятор платформы (обычно <TT
CLASS="FILENAME"
>cc</TT
>). Подобным образом, при необходимости можно переопределить флаги компилятора по умолчанию с помощью переменной <TT
CLASS="ENVAR"
>CFLAGS</TT
>.</P
><P
>Вы можете задать переменные окружения в командной строке <TT
CLASS="FILENAME"
>configure</TT
>, например, так: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>./configure CC=/opt/bin/gcc CFLAGS='-O2 -pipe'</KBD
></PRE
><P></P
><P
>Ниже приведён список значимых переменных, которые можно установить таким образом: <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>BISON</TT
></DT
><DD
><P
>Программа Bison</P
></DD
><DT
><TT
CLASS="ENVAR"
>CC</TT
></DT
><DD
><P
>компилятор C</P
></DD
><DT
><TT
CLASS="ENVAR"
>CFLAGS</TT
></DT
><DD
><P
>параметры, передаваемые компилятору C</P
></DD
><DT
><TT
CLASS="ENVAR"
>CPP</TT
></DT
><DD
><P
>препроцессор C</P
></DD
><DT
><TT
CLASS="ENVAR"
>CPPFLAGS</TT
></DT
><DD
><P
>параметры, передаваемые препроцессору C</P
></DD
><DT
><TT
CLASS="ENVAR"
>DTRACE</TT
></DT
><DD
><P
>расположение программы <TT
CLASS="COMMAND"
>dtrace</TT
></P
></DD
><DT
><TT
CLASS="ENVAR"
>DTRACEFLAGS</TT
></DT
><DD
><P
>параметры, передаваемые программе <TT
CLASS="COMMAND"
>dtrace</TT
></P
></DD
><DT
><TT
CLASS="ENVAR"
>FLEX</TT
></DT
><DD
><P
>программа Flex</P
></DD
><DT
><TT
CLASS="ENVAR"
>LDFLAGS</TT
></DT
><DD
><P
>параметры, которые должны использоваться при компоновке исполняемых программ или разделяемых библиотек</P
></DD
><DT
><TT
CLASS="ENVAR"
>LDFLAGS_EX</TT
></DT
><DD
><P
>дополнительные параметры для компоновки только исполняемых программ</P
></DD
><DT
><TT
CLASS="ENVAR"
>LDFLAGS_SL</TT
></DT
><DD
><P
>дополнительные параметры для компоновки только разделяемых библиотек</P
></DD
><DT
><TT
CLASS="ENVAR"
>MSGFMT</TT
></DT
><DD
><P
>расположение программы <TT
CLASS="COMMAND"
>msgfmt</TT
> для поддержки национальных языков</P
></DD
><DT
><TT
CLASS="ENVAR"
>PERL</TT
></DT
><DD
><P
>Полный путь к интерпретатору Perl. Он нужен для определения зависимостей при сборке PL/Perl.</P
></DD
><DT
><TT
CLASS="ENVAR"
>PYTHON</TT
></DT
><DD
><P
>Полный путь к интерпретатору Python. Он нужен для определения зависимостей при сборке PL/Python. Кроме того, в зависимости от того, какой Python, 2 или 3, выбран здесь (или неявно как-то ещё), определяется вариация языка PL/Python, которая будет доступна. За дополнительными сведениями обратитесь к <A
HREF="plpython-python23.html"
>Разделу 43.1</A
>.</P
></DD
><DT
><TT
CLASS="ENVAR"
>TCLSH</TT
></DT
><DD
><P
>Полный путь к интерпретатору Tcl. Он нужен для определения зависимостей при сборке PL/Tcl и будет подставляться в скрипты Tcl.</P
></DD
><DT
><TT
CLASS="ENVAR"
>XML2_CONFIG</TT
></DT
><DD
><P
>Программа <TT
CLASS="COMMAND"
>xml2-config</TT
> помогает найти инсталляцию libxml.</P
></DD
></DL
></DIV
><P></P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>Разрабатывая внутренний код сервера, рекомендуется использовать указания configure <TT
CLASS="OPTION"
>--enable-cassert</TT
> (которое включает множество проверок во время выполнения) и <TT
CLASS="OPTION"
>--enable-debug</TT
> (которое упрощает использование средств отладки).</P
><P
>Используя GCC, лучше выполнять сборку с уровнем оптимизации не ниже <TT
CLASS="OPTION"
>-O1</TT
>, так как без оптимизации (<TT
CLASS="OPTION"
>-O0</TT
>) отключаются некоторые важные предупреждения компилятора (например, об использовании неинициализированных переменных). Однако оптимизация ненулевого уровня может затруднить отладку, так как при пошаговом выполнении скомпилированный код обычно не соответствует в точности строкам исходного кода. При возникновении сложностей с отладкой оптимизированного кода, перекомпилируйте интересующие вас файлы с ключом <TT
CLASS="OPTION"
>-O0</TT
>. Это можно сделать, просто передав соответствующий параметр <SPAN
CLASS="APPLICATION"
>make</SPAN
>: <TT
CLASS="COMMAND"
>make PROFILE=-O0 file.o</TT
>.</P
></BLOCKQUOTE
></DIV
></LI
><LI
CLASS="STEP"
><A
NAME="BUILD"
></A
><P
><B
>Сборка</B
></P
><P
>Чтобы запустить сборку, введите: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make</KBD
></PRE
><P> (Помните, что нужно использовать <ACRONYM
CLASS="ACRONYM"
>GNU</ACRONYM
> <SPAN
CLASS="APPLICATION"
>make</SPAN
>.) Сборка займёт несколько минут, в зависимости от мощности вашего компьютера. В конце должно появиться сообщение: </P><PRE
CLASS="SCREEN"
>All of PostgreSQL is successfully made. Ready to install.</PRE
><P> (Весь PostgreSQL собран успешно и готов к установке.)</P
><P
>Если вы хотите собрать всё, что может быть собрано, включая документацию (страницы HTML и man) и дополнительные модули (<TT
CLASS="FILENAME"
>contrib</TT
>), введите: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make world</KBD
></PRE
><P> В конце должно появиться сообщение: </P><PRE
CLASS="SCREEN"
>PostgreSQL, contrib and HTML documentation successfully made. Ready to install.</PRE
><P> (PostgreSQL, contrib и HTML-документация собраны успешно и готовы к установке.)</P
></LI
><LI
CLASS="STEP"
><P
><B
>Регрессионные тесты</B
></P
><P
>Если вы хотите протестировать только что собранный сервер, прежде чем устанавливать его, на этом этапе вы можете запустить регрессионные тесты. Регрессионные тесты — это комплектов тестов, проверяющих, что <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> работает на вашем компьютере так, как задумано разработчиками. Введите: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make check</KBD
></PRE
><P> (Это должен выполнять обычный пользователь, не root.) В <A
HREF="regress.html"
>Главе 30</A
> вы можете подробно узнать, как прочитать результаты проверки. Вы можете повторить эту проверку позже в любой момент, выполнив ту же команду.</P
></LI
><LI
CLASS="STEP"
><A
NAME="INSTALL"
></A
><P
><B
>Установка файлов</B
></P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>Если вы обновляете существующую систему, обязательно прочитайте инструкции по обновлению кластера, приведённые в <A
HREF="upgrading.html"
>Раздел 17.6</A
>.</P
></BLOCKQUOTE
></DIV
><P
>Чтобы установить <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, введите: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make install</KBD
></PRE
><P> При этом файлы будут установлены в каталоги, заданные в <A
HREF="install-procedure.html#CONFIGURE"
>Шаге 1</A
>. Убедитесь в том, что у вас есть соответствующие разрешения для записи туда. Обычно это действие нужно выполнять от имени root. Также возможно заранее создать целевые каталоги и дать требуемый доступ к ним.</P
><P
>Чтобы установить документацию (HTML и страницы man), введите: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make install-docs</KBD
></PRE
><P></P
><P
>Если вы собирали цель world, введите вместо этого: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make install-world</KBD
></PRE
><P> При этом также будет установлена документация.</P
><P
>Вы можете запустить <TT
CLASS="LITERAL"
>make install-strip</TT
> вместо <TT
CLASS="LITERAL"
>make install</TT
>, чтобы убрать лишнее из устанавливаемых исполняемых файлов и библиотек. Это позволит сэкономить немного места. Если вы выполняете сборку для отладки, при этом фактически вырежется поддержка отладки, поэтому этот вариант подходит только если отладка больше не планируется. Процедура <TT
CLASS="LITERAL"
>install-strip</TT
> пытается оптимизировать объём разумными способами, но не рассчитывайте, что она способна удалить каждый ненужный байт из исполняемого файла. Если вы хотите освободить как можно больше места, вам придётся проделать это вручную.</P
><P
>При стандартной установке в систему устанавливаются все заголовочные файлы для разработки клиентских приложений, а также программ на стороне сервера, в частности, собственных функций или типов данных, реализованных на C. (До <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 8.0 для этого требовалось выполнить <TT
CLASS="LITERAL"
>make install-all-headers</TT
>, но сейчас это включено в стандартную установку.)</P
><DIV
CLASS="FORMALPARA"
><P
><B
>Установка только клиентской части: </B
>Если вы хотите установить только клиентские приложения и интерфейсные библиотеки, можно выполнить эти команды: </P><PRE
CLASS="SCREEN"
><KBD
CLASS="USERINPUT"
>make -C src/bin install</KBD
>
<KBD
CLASS="USERINPUT"
>make -C src/include install</KBD
>
<KBD
CLASS="USERINPUT"
>make -C src/interfaces install</KBD
>
<KBD
CLASS="USERINPUT"
>make -C doc install</KBD
></PRE
><P>
В <TT
CLASS="FILENAME"
>src/bin</TT
> есть несколько программ, применимых только на сервере, но они очень малы.</P
></DIV
></LI
></OL
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
>Удаление: </B
>Чтобы отменить установку, воспользуйтесь командой <TT
CLASS="COMMAND"
>make uninstall</TT
>. Однако созданные каталоги при этом удалены не будут.</P
></DIV
><DIV
CLASS="FORMALPARA"
><P
><B
>Очистка: </B
>После установки вы можете освободить место на диске, удалив файлы сборки из дерева исходного кода, выполнив <TT
CLASS="COMMAND"
>make clean</TT
>. При этом файлы, созданные программой <TT
CLASS="COMMAND"
>configure</TT
>, будут сохранены, так что позже вы сможете пересобрать всё заново, выполнив <TT
CLASS="COMMAND"
>make</TT
>. Чтобы сбросить дерево исходного кода к состоянию, в котором оно распространяется, выполните <TT
CLASS="COMMAND"
>make distclean</TT
>. Если вы намерены выполнять сборку одного дерева исходного кода для нескольких платформ, вам придётся делать это и переконфигурировать сборочную среду для каждой. (Также можно использовать отдельное дерево сборки для каждой платформы, чтобы дерево исходного кода оставалось неизменным.)</P
></DIV
><P
>Если в процессе сборки вы обнаружите, что заданные вами параметры <TT
CLASS="COMMAND"
>configure</TT
> оказались ошибочными, либо вы изменили что-то, от чего зависит работа <TT
CLASS="COMMAND"
>configure</TT
> (например, обновили пакеты), стоит выполнить <TT
CLASS="COMMAND"
>make distclean</TT
>, прежде чем переконфигурировать и пересобирать всё заново. Если этого не сделать, ваши изменения в конфигурации могут распространиться не везде, где они важны.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="install-getsource.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="install-post.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Получение исходного кода</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Действия после установки</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>