<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Как правильно сообщить об ошибке</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Документация по PostgreSQL 9.4.1"
HREF="index.html"><LINK
REL="UP"
TITLE="Предисловие"
HREF="preface.html"><LINK
REL="PREVIOUS"
TITLE="Полезные ресурсы"
HREF="resources.html"><LINK
REL="NEXT"
TITLE="Введение"
HREF="tutorial.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"><META
NAME="creation"
CONTENT="2016-04-12T07:56:57"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Документация по PostgreSQL 9.4.1</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Полезные ресурсы"
HREF="resources.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="preface.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Предисловие</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Введение"
HREF="tutorial.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="BUG-REPORTING"
>Как правильно сообщить об ошибке</A
></H1
><P
>Если вы найдёте ошибку в <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, дайте нам знать о ней. Благодаря вашему отчёту об ошибке, <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> станет ещё более надёжным, ведь даже при самом высоком качестве кода нельзя гарантировать, что каждый блок и каждая функция <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> будет работать везде и при любых обстоятельствах.</P
><P
>Следующие предложения призваны помочь вам в составлении отчёта об ошибке, который можно будет обработать эффективно. Мы не требуем их неукоснительного выполнения, но всё же лучше следовать им для общего блага.</P
><P
>Мы не можем обещать, что каждая ошибка будет исправлена немедленно. Если ошибка очевидна, критична или касается множества пользователей, велики шансы, что ей кто-то займётся. Бывает, что мы рекомендуем обновить версию и проверить, сохраняется ли ошибка. Мы также можем решить, что ошибку нельзя исправить, пока не будет проделана большая работа, которая уже запланирована. Случается и так, что исправить ошибку слишком сложно, а на повестке дня есть много более важных дел. Если же вы хотите, чтобы вам помогли немедленно, возможно вам стоит заключить договор на коммерческую поддержку.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN259"
>Диагностика ошибок</A
></H2
><P
>Прежде чем сообщать об ошибке, пожалуйста, прочитайте и перечитайте документацию и убедитесь, что вообще возможно сделать то, что вы хотите. Если из документации неясно, можно это сделать или нет, пожалуйста, сообщите и об этом (тогда это ошибка в документации). Если выясняется, что программа делает что-то не так, как написано в документации, это так же ошибка. Вот лишь некоторые примеры возможных ошибок: <P
></P
></P><UL
><LI
><P
>Программа завершается с аварийным сигналом или сообщением об ошибке операционной системы, указывающей на проблему в программе. (В качестве контрпримера можно привести сообщение <SPAN
CLASS="QUOTE"
>"Нет места на диске"</SPAN
> &mdash; эту проблему вы должны решить сами.)</P
></LI
><LI
><P
>Программа выдаёт неправильный результат для любых вводимых данных.</P
></LI
><LI
><P
>Программа отказывается принимать допустимые (согласно документации) данные.</P
></LI
><LI
><P
>Программа принимает недопустимые данные без сообщения об ошибке или предупреждения. Но помните: то, что вы считаете недопустимым, мы можем считать приемлемым расширением или совместимым с принятой практикой.</P
></LI
><LI
><P
>Не удаётся скомпилировать, собрать или установить <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> на поддерживаемой платформе, выполняя соответствующие инструкции.</P
></LI
></UL
><P> Здесь под <SPAN
CLASS="QUOTE"
>"программой"</SPAN
> подразумевается произвольный исполняемый файл, а не исключительно серверный процесс.</P
><P
>Медленная работа или высокая загрузка ресурсов &mdash; это не обязательно ошибка. Попробуйте оптимизировать ваши приложения, прочитав документацию или попросив помощи в списках рассылки. Также может не быть ошибкой какое-то несоответствие стандарту <ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>, если только явно не декларируется соответствие в данном аспекте.</P
><P
>Прежде чем подготовить сообщение, проверьте, не упоминается ли эта ошибка в списке TODO или FAQ. Если вы не можете разобраться в нашем списке TODO, сообщите о своей проблеме. По крайней мере так мы сделаем список TODO более понятным.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN279"
>Что сообщать</A
></H2
><P
>Главное правило, которое нужно помнить &mdash; сообщайте все факты и только факты. Не стройте догадки, что по вашему мнению работает не так, что <SPAN
CLASS="QUOTE"
>"по-видимому происходит"</SPAN
>, или в какой части программы ошибка. Если вы не знакомы с тонкостями реализации, вы скорее всего ошибётесь и ничем нам не поможете. И даже если не ошибётесь, расширенные объяснения могут быть прекрасным дополнением, но не заменой фактам. Если мы соберёмся исправить ошибку, мы всё равно сами должны будем посмотреть, в чём она. С другой стороны, сообщить голые факты довольно просто (можно просто скопировать текст с экрана), но часто важные детали опускаются, потому что не считаются таковыми или кажется, что отчёт будет и без того понятен.</P
><P
>В каждом отчёте об ошибке следует указать: <P
></P
></P><UL
><LI
><P
>Точную последовательность действий для воспроизведения проблемы, начиная <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>с запуска программы</I
></SPAN
>. Она должна быть самодостаточной; если вывод зависит от данных в таблицах, то недостаточно сообщить один лишь <TT
CLASS="COMMAND"
>SELECT</TT
>, без предшествующих операторов <TT
CLASS="COMMAND"
>CREATE TABLE</TT
> и <TT
CLASS="COMMAND"
>INSERT</TT
>. У нас не будет времени, чтобы восстанавливать схему базы данных по предоставленной информации, и если предполагается, что мы будем создавать свои тестовые данные, вероятнее всего мы пропустим это сообщение.</P
><P
>Лучший формат теста для проблем с SQL &mdash; файл, который можно передать программе <SPAN
CLASS="APPLICATION"
>psql</SPAN
> и увидеть проблему. (И убедитесь, что в вашем файле <TT
CLASS="FILENAME"
>~/.psqlrc</TT
> ничего нет.) Самый простой способ получить такой файл &mdash; выгрузить объявления таблиц и данные, необходимые для создания полигона, с помощью <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>, а затем добавить проблемный запрос. Постарайтесь сократить размер вашего тестового примера, хотя это не абсолютно необходимо. Если ошибка воспроизводится, мы найдём её в любом случае.</P
><P
>Если ваше приложение использует какой-то другой клиентский интерфейс, например <SPAN
CLASS="APPLICATION"
>PHP</SPAN
>, пожалуйста, попытайтесь свести ошибку к проблемным запросам. Мы вряд ли будем устанавливать веб-сервер у себя, чтобы воспроизвести вашу проблему. В любом случае помните, что нам нужны ваши конкретные входные файлы; мы не будем гадать, что подразумевается в сообщении о проблеме с <SPAN
CLASS="QUOTE"
>"большими файлами"</SPAN
> или <SPAN
CLASS="QUOTE"
>"базой среднего размера"</SPAN
>, так как это слишком расплывчатые понятия.</P
></LI
><LI
><P
>Результат, который вы получаете. Пожалуйста, не говорите, что что-то <SPAN
CLASS="QUOTE"
>"не работает"</SPAN
> или <SPAN
CLASS="QUOTE"
>"сбоит"</SPAN
>. Если есть сообщение об ошибке, покажите его, даже если вы его не понимаете. Если программа завершается ошибкой операционной системы, сообщите какой. Или если ничего не происходит, отразите это. Даже если в результате вашего теста происходит сбой программы или что-то очевидное, мы можем не наблюдать этого у себя. Проще всего будет скопировать текст с терминала, если это возможно.</P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>Если вы упоминаете сообщение об ошибке, пожалуйста, укажите его в наиболее полной форме. Например, в <SPAN
CLASS="APPLICATION"
>psql</SPAN
>, для этого сначала выполните <TT
CLASS="LITERAL"
>\set VERBOSITY verbose</TT
>. Если вы цитируете сообщения из журнала событий сервера, присвойте параметру выполнения <A
HREF="runtime-config-logging.html#GUC-LOG-ERROR-VERBOSITY"
>log_error_verbosity</A
> значение <TT
CLASS="LITERAL"
>verbose</TT
>, чтобы журнал был наиболее подробным.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>В случае фатальных ошибок сообщение на стороне клиента может не содержать всю необходимую информацию. Пожалуйста, также изучите журнал сервера баз данных. Если сообщения журнала у вас не сохраняются, это подходящий повод, чтобы начать сохранять их.</P
></BLOCKQUOTE
></DIV
></LI
><LI
><P
>Очень важно отметить, какой результат вы ожидали получить. Если вы просто напишете <SPAN
CLASS="QUOTE"
>"Эта команда выдаёт это."</SPAN
> или <SPAN
CLASS="QUOTE"
>"Это не то, что мне нужно."</SPAN
>, мы можем запустить ваш пример, посмотреть на результат и решить, что всё в порядке и никакой ошибки нет. Не заставляйте нас тратить время на расшифровку точного смысла ваших команд. В частности, воздержитесь от утверждений типа <SPAN
CLASS="QUOTE"
>"Это не то, что делает Oracle/положено по стандарту SQL"</SPAN
>. Выяснять, как должно быть по стандарту <ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>, не очень интересно, а кроме того мы не знаем, как ведут себя все остальные реляционные базы данных. (Если вы наблюдаете аварийное завершение программы, этот пункт, очевидно, неуместен.)</P
></LI
><LI
><P
>Все параметры командной строки и другие параметры запуска, включая все связанные переменные окружения или файлы конфигурации, которые вы изменяли. Пожалуйста, предоставляйте точные сведения. Если вы используете готовый дистрибутив, в котором сервер БД запускается при загрузке системы, вам следует выяснить, как это происходит.</P
></LI
><LI
><P
>Всё, что вы делали не так, как написано в инструкциях по установке.</P
></LI
><LI
><P
>Версию <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>. Чтобы выяснить версию сервера, к которому вы подключены, можно выполнить команду <TT
CLASS="LITERAL"
>SELECT version();</TT
>. Большинство исполняемых программ также поддерживают параметр <TT
CLASS="OPTION"
>--version</TT
>; как минимум должно работать <TT
CLASS="LITERAL"
>postgres --version</TT
> и <TT
CLASS="LITERAL"
>psql --version</TT
>. Если такая функция или параметры не поддерживаются, вероятно вашу версию давно пора обновить. Если вы используете дистрибутивный пакет, например RPM, сообщите это, включая полную версию этого пакета. Если же вы работаете со снимком Git, укажите это и хеш последней правки.</P
><P
>Если ваша версия старее, чем 9.4.1, мы почти наверняка посоветуем вам обновиться. В каждом новом выпуске очень много улучшений и исправлений ошибок, так что ошибка, которую вы встретили в старой версии <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, скорее всего уже исправлена. Мы можем обеспечить только ограниченную поддержку для тех, кто использует старые версии <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>; если вам этого недостаточно, подумайте о заключении договора коммерческой поддержки.</P
><P
>     </P
></LI
><LI
><P
>Сведения о платформе, включая название и версию ядра, библиотеки C, характеристики процессора, памяти и т. д. Часто бывает достаточно сообщить название и версию ОС, но не рассчитывайте, что все знают, что именно подразумевается под <SPAN
CLASS="QUOTE"
>"Debian"</SPAN
>, или что все используют i386. Если у вас возникают сложности со сборкой кода и установкой, также необходима информация о сборочной среде вашего компьютера (компилятор, <SPAN
CLASS="APPLICATION"
>make</SPAN
> и т. д.).</P
></LI
></UL
><P> Не бойтесь, если ваш отчёт об ошибке не будет краток. У таланта есть ещё и брат. Лучше сообщить обо всём сразу, чем мы будем потом выуживать факты из вас. С другой стороны, если файлы, которые вы хотите показать, велики, правильнее будет сначала спросить, хочет ли кто-то взглянуть на них. В <A
HREF="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html"
TARGET="_top"
>этой статье</A
> вы найдёте другие советы по составлению отчётов об ошибках.</P
><P
>Не тратьте всё своё время, чтобы выяснить, при каких входных данных исчезает проблема. Это вряд ли поможет решить её. Если выяснится, что быстро исправить ошибку нельзя, тогда у вас будет время найти обходной путь и сообщить о нём. И опять же, не тратьте своё время на выяснение, почему возникает эта ошибка. Мы найдём её причину достаточно быстро.</P
><P
>Сообщая об ошибке, старайтесь не допускать путаницы в терминах. Программный пакет в целом называется <SPAN
CLASS="QUOTE"
>"PostgreSQL"</SPAN
>, иногда <SPAN
CLASS="QUOTE"
>"Postgres"</SPAN
> для краткости. Если вы говорите именно о серверном процессе, упомяните это; не следует говорить <SPAN
CLASS="QUOTE"
>"сбой в PostgreSQL"</SPAN
>. Сбой одного серверного процесса кардинально отличается от сбоя родительского процесса <SPAN
CLASS="QUOTE"
>"postgres"</SPAN
>, поэтому, пожалуйста, не называйте <SPAN
CLASS="QUOTE"
>"сбоем сервера"</SPAN
> отключение одного из подчинённых серверных процессов и наоборот. Кроме того, клиентские программы, такие как интерактивный <SPAN
CLASS="QUOTE"
>"<SPAN
CLASS="APPLICATION"
>psql</SPAN
>"</SPAN
> существуют совершенно отдельно от серверной части. По возможности постарайтесь точно указать, где наблюдается проблема, на стороне клиента или сервера.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN346"
>Куда сообщать</A
></H2
><P
>В общем случае посылать сообщения об ошибках следует в список рассылки <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-bugs@postgresql.org"
>pgsql-bugs@postgresql.org</A
>&#62;</CODE
>. Вам надо будет написать информативную тему письма, возможно включив в неё часть сообщения об ошибке.</P
><P
>Ещё один вариант отправки сообщения &mdash; заполнить отчёт об ошибке в веб-форме на <A
HREF="http://www.postgresql.org/"
TARGET="_top"
>сайте проекта</A
>. В этом случае ваше сообщение будет автоматически отправлено в список рассылки <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-bugs@postgresql.org"
>pgsql-bugs@postgresql.org</A
>&#62;</CODE
>.</P
><P
>Если вы сообщаете об ошибке, связанной с безопасностью, и не хотите, чтобы ваше сообщение появилось в публичных архивах, не отправляйте его в <TT
CLASS="LITERAL"
>pgsql-bugs</TT
>. Об уязвимостях вы можете написать в закрытую группу <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:security@postgresql.org"
>security@postgresql.org</A
>&#62;</CODE
>.</P
><P
>Не посылайте сообщения в списки рассылки для пользователей, например в <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-sql@postgresql.org"
>pgsql-sql@postgresql.org</A
>&#62;</CODE
> или <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-general@postgresql.org"
>pgsql-general@postgresql.org</A
>&#62;</CODE
>. Эти рассылки предназначены для ответов на вопросы пользователей, и их подписчики обычно не хотят получать сообщения об ошибках, более того, они вряд ли исправят их.</P
><P
>Также, пожалуйста, <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>не</I
></SPAN
> отправляйте отчёты об ошибках в список <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-hackers@postgresql.org"
>pgsql-hackers@postgresql.org</A
>&#62;</CODE
>. Этот список предназначен для обсуждения разработки <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, и будет лучше, если сообщения об ошибках будут существовать отдельно. Хотя мы можем перенести обсуждение вашей ошибки в <TT
CLASS="LITERAL"
>pgsql-hackers</TT
>, если проблема требует дополнительного рассмотрения.</P
><P
>Если вы столкнулись с ошибкой в документации, лучше всего написать об этом в список рассылки, посвящённый документации, <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-docs@postgresql.org"
>pgsql-docs@postgresql.org</A
>&#62;</CODE
>. Пожалуйста, постарайтесь конкретизировать, какая часть документации вас не устраивает.</P
><P
>Если ваша ошибка связана с переносимостью на неподдерживаемой платформе, отправьте письмо по адресу <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:pgsql-hackers@postgresql.org"
>pgsql-hackers@postgresql.org</A
>&#62;</CODE
>, чтобы мы (и вы) смогли запустить <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> на вашей платформе.</P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Замечание: </B
>Из-за большого количества спама все вышеупомянутые адреса сделаны закрытыми. То есть, чтобы отправить сообщение в список рассылки, вы должны подписаться на него. (Хотя это не требуется при использовании веб-формы сообщения об ошибке.) Если вы хотите отправить сообщение, но не получать затем письма из рассылки, вы можете подписаться и поставить в параметрах подписки <TT
CLASS="LITERAL"
>nomail</TT
>. Получить дополнительную информацию вы можете, отправив по адресу <CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:majordomo@postgresql.org"
>majordomo@postgresql.org</A
>&#62;</CODE
> одно слово <TT
CLASS="LITERAL"
>help</TT
> в теле сообщения.</P
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="resources.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="tutorial.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Полезные ресурсы</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="preface.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Введение</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>