<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>            pg_dumpall
          </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Документация по PostgreSQL 9.4.1"
HREF="index.html"><LINK
REL="UP"
TITLE="Клиентские приложения PostgreSQL"
HREF="reference-client.html"><LINK
REL="PREVIOUS"
TITLE="pg_dump"
HREF="app-pgdump.html"><LINK
REL="NEXT"
TITLE="            pg_isready
          "
HREF="app-pg-isready.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"><META
NAME="creation"
CONTENT="2016-04-12T07:56:57"></HEAD
><BODY
CLASS="REFENTRY"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Документация по PostgreSQL 9.4.1</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="pg_dump"
HREF="app-pgdump.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="reference-client.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="            pg_isready
          "
HREF="app-pg-isready.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="APP-PG-DUMPALL"
></A
><SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN88616"
></A
><H2
>Название</H2
>pg_dumpall&nbsp;--&nbsp;выгрузить кластер баз данных <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> в формате скрипта</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN88620"
></A
><H2
>Синтаксис</H2
><P
><TT
CLASS="COMMAND"
>pg_dumpall</TT
> [              <TT
CLASS="REPLACEABLE"
><I
>параметр-подключения</I
></TT
>
            ...] [              <TT
CLASS="REPLACEABLE"
><I
>параметр</I
></TT
>
            ...]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-PG-DUMPALL-DESCRIPTION"
></A
><H2
>Описание</H2
><P
>Утилита <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> предназначена для записи (<SPAN
CLASS="QUOTE"
>"выгрузки"</SPAN
>) всех баз данных кластера <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> в один файл в формате скрипта. Этот файл содержит команды <ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>, так что передав его на вход <A
HREF="app-psql.html"
>            <SPAN
CLASS="APPLICATION"
>psql</SPAN
>
          </A
>, можно восстановить все базы данных. Чтобы его сформировать, <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> вызывает для каждой базы данных в кластере <A
HREF="app-pgdump.html"
>pg_dump</A
> и дополнительно выгружает глобальные объекты, общие для всех баз данных. (Утилита <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
> не сохраняет эти объекты.) В настоящее время, к таким объектам относятся группы, пользователи и табличные пространства, а также такие свойства, как права доступа, которые применяются к базам данных в целом.</P
><P
>Так как утилита <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> читает таблицы из всех баз данных, для получения полного содержимого баз запускать её, как правило, нужно от имени суперпользователя. Чтобы впоследствии выполнить сохранённый скрипт, также необходимо иметь права суперпользователя, позволяющие создавать пользователей, группы и собственно базы данных.</P
><P
>Генерируемый SQL-скрипт записывается в стандартное устройство вывода. Чтобы перенаправить его в файл, воспользуйтесь параметром [-f|file] или операторами оболочки.</P
><P
>Утилите <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> требуется подключаться к серверу <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> несколько раз (к каждой базе по отдельности). Если вы проходите проверку подлинности по паролю, вам придётся каждый раз вводить пароль. Чтобы избежать этого, удобно иметь файл <TT
CLASS="FILENAME"
>~/.pgpass</TT
>. За дополнительными сведениями обратитесь к <A
HREF="libpq-pgpass.html"
>Разделу 31.15</A
>.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN88646"
></A
><H2
>Параметры</H2
><P
>Параметры командной строки для управления содержимым и форматом вывода. <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-a</TT
><BR><TT
CLASS="OPTION"
>--data-only</TT
></DT
><DD
><P
>Выгружать только данные, без схемы (определений данных).</P
></DD
><DT
><TT
CLASS="OPTION"
>-c</TT
><BR><TT
CLASS="OPTION"
>--clean</TT
></DT
><DD
><P
>Добавить команды SQL для удаления (DROP) баз данных перед командами, создающими их. В дополнение к ним добавляются команды <TT
CLASS="COMMAND"
>DROP</TT
> для ролей и табличных пространств.</P
></DD
><DT
><TT
CLASS="OPTION"
>-f <TT
CLASS="REPLACEABLE"
><I
>имя_файла</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--file=<TT
CLASS="REPLACEABLE"
><I
>имя_файла</I
></TT
></TT
></DT
><DD
><P
>Направить вывод в указанный файл. Если этот параметр опущен, скрипт записывается в стандартный вывод.</P
></DD
><DT
><TT
CLASS="OPTION"
>-g</TT
><BR><TT
CLASS="OPTION"
>--globals-only</TT
></DT
><DD
><P
>Выгружать только глобальные объекты (роли и табличные пространства), без баз данных.</P
></DD
><DT
><TT
CLASS="OPTION"
>-i</TT
><BR><TT
CLASS="OPTION"
>--ignore-version</TT
></DT
><DD
><P
>Устаревший флаг и сейчас игнорируется.</P
></DD
><DT
><TT
CLASS="OPTION"
>-o</TT
><BR><TT
CLASS="OPTION"
>--oids</TT
></DT
><DD
><P
>Выгружать идентификаторы объектов (<ACRONYM
CLASS="ACRONYM"
>OID</ACRONYM
>s) вместе с данными таблиц. Используйте этот параметр, если в приложении есть ссылки на <ACRONYM
CLASS="ACRONYM"
>OID</ACRONYM
>, например во внешних ключах. В противном случае, этот параметр лучше не использовать.</P
></DD
><DT
><TT
CLASS="OPTION"
>-O</TT
><BR><TT
CLASS="OPTION"
>--no-owner</TT
></DT
><DD
><P
>Не генерировать команды, устанавливающие владение объектами, как в исходной базе данных. По умолчанию, <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> генерирует команды <TT
CLASS="COMMAND"
>ALTER OWNER</TT
> или <TT
CLASS="COMMAND"
>SET SESSION AUTHORIZATION</TT
>, восстанавливающие исходных владельцев для создаваемых элементов схемы. Однако выполнить эти команды сможет только суперпользователь (или пользователь, владеющий всеми объектами, создаваемыми скриптом). Чтобы получить скрипт, который сможет восстановить любой пользователь (но при этом он станет владельцем всех объектов), используется <TT
CLASS="OPTION"
>-O</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>-r</TT
><BR><TT
CLASS="OPTION"
>--roles-only</TT
></DT
><DD
><P
>Выгружать только роли, без баз данных и табличных пространств.</P
></DD
><DT
><TT
CLASS="OPTION"
>-s</TT
><BR><TT
CLASS="OPTION"
>--schema-only</TT
></DT
><DD
><P
>Выгружать только определения объектов (схемы), без данных.</P
></DD
><DT
><TT
CLASS="OPTION"
>-S <TT
CLASS="REPLACEABLE"
><I
>имя_пользователя</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--superuser=<TT
CLASS="REPLACEABLE"
><I
>имя_пользователя</I
></TT
></TT
></DT
><DD
><P
>Указать суперпользователя, который будет использоваться для отключения триггеров. Параметр имеет значение только вместе с <TT
CLASS="OPTION"
>--disable-triggers</TT
>. Обычно его лучше не использовать, а запускать полученный скрипт от имени суперпользователя.</P
></DD
><DT
><TT
CLASS="OPTION"
>-t</TT
><BR><TT
CLASS="OPTION"
>--tablespaces-only</TT
></DT
><DD
><P
>Выгружать только табличные пространства, без баз данных и ролей.</P
></DD
><DT
><TT
CLASS="OPTION"
>-v</TT
><BR><TT
CLASS="OPTION"
>--verbose</TT
></DT
><DD
><P
>Включить режим подробных сообщений. В этом режиме <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> записывает в выходной файл время начала/завершения выгрузки, а в стандартный канал ошибок — сообщения о процессе. При этом подробные сообщения будет также выводить <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>-V</TT
><BR><TT
CLASS="OPTION"
>--version</TT
></DT
><DD
><P
>Сообщить версию <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> и завершиться.</P
></DD
><DT
><TT
CLASS="OPTION"
>-x</TT
><BR><TT
CLASS="OPTION"
>--no-privileges</TT
><BR><TT
CLASS="OPTION"
>--no-acl</TT
></DT
><DD
><P
>Не выгружать права доступа (команды GRANT/REVOKE).</P
></DD
><DT
><TT
CLASS="OPTION"
>--binary-upgrade</TT
></DT
><DD
><P
>Этот параметр предназначен для утилит обновления сервера. Использование для иных целей не рекомендуется и не поддерживается. Поведение параметра может быть изменено в последующих версиях без предварительного уведомления.</P
></DD
><DT
><TT
CLASS="OPTION"
>--column-inserts</TT
><BR><TT
CLASS="OPTION"
>--attribute-inserts</TT
></DT
><DD
><P
>Выгружать данные в виде команд <TT
CLASS="COMMAND"
>INSERT</TT
> с явно задаваемыми именами колонок (<TT
CLASS="LITERAL"
>INSERT INTO <TT
CLASS="REPLACEABLE"
><I
>таблица</I
></TT
> (<TT
CLASS="REPLACEABLE"
><I
>колонка</I
></TT
>, ...) VALUES ...</TT
>). При этом восстановление будет очень медленным; в основном это применяется для выгрузки данных, которые затем будут загружаться не в <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-dollar-quoting</TT
></DT
><DD
><P
>Выключает экранирование тел функций с помощью знака доллара и принуждает к экранированию посредством стандартного синтаксиса SQL.</P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-triggers</TT
></DT
><DD
><P
>Этот параметр действует только при выгрузке одних данных. С ним <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> добавляет команды, отключающие триггеры в целевых таблицах на время загрузки данных. Используйте его, если в ваших таблицах определены проверки ссылочной целостности или другие триггеры, которые вы не хотели бы выполнять в процессе загрузки данных.</P
><P
>В настоящее время команды, генерируемые с параметром <TT
CLASS="OPTION"
>--disable-triggers</TT
>, должны исполняться от имени суперпользователя. Таким образом, необходимо также передавать флаг <TT
CLASS="OPTION"
>-S</TT
>, либо при восстановлении выполнять скрипт от имени суперпользователя.</P
></DD
><DT
><TT
CLASS="OPTION"
>--if-exists</TT
></DT
><DD
><P
>Использовать условные команды (т. е. добавлять предложение <TT
CLASS="LITERAL"
>IF EXISTS</TT
>) при очистке базы данных и других объектов. Этот параметр принимается, только если также указан параметр <TT
CLASS="OPTION"
>--clean</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>--inserts</TT
></DT
><DD
><P
>Выгружать данные в виде команд <TT
CLASS="COMMAND"
>INSERT</TT
>, а не <TT
CLASS="COMMAND"
>COPY</TT
>. При этом восстановление значительно замедлится; в основном это применяется для выгрузки данных, которые затем будут загружаться не в <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>. Заметьте, что восстановление может вовсе не выполниться при изменении порядка колонок в таблицах. В этом смысле параметр <TT
CLASS="OPTION"
>--column-inserts</TT
> безопаснее, но восстановление будет ещё медленнее.</P
></DD
><DT
><TT
CLASS="OPTION"
>--lock-wait-timeout=<TT
CLASS="REPLACEABLE"
><I
>время_ожидания</I
></TT
></TT
></DT
><DD
><P
>Не ждать бесконечно получения разделяемых блокировок таблиц в начале процедуры выгрузки. Вместо этого, выдать ошибку, если не удастся заблокировать таблицы за указанное <TT
CLASS="REPLACEABLE"
><I
>время_ожидания</I
></TT
>. Это время можно задать в любом из форматов, принимаемых командой <TT
CLASS="COMMAND"
>SET statement_timeout</TT
>. Допустимые значения зависят от версии сервера, выгружающего данные, но количество миллисекунд в виде целого числа принимают все версии, начиная с 7.3. Более ранние версии игнорируют этот параметр.</P
></DD
><DT
><TT
CLASS="OPTION"
>--no-security-labels</TT
></DT
><DD
><P
>Не выгружать метки безопасности.</P
></DD
><DT
><TT
CLASS="OPTION"
>--no-tablespaces</TT
></DT
><DD
><P
>Не выводить команды, создающие или выбирающие табличные пространства для объектов. С этим параметром все объекты будут созданы в пространстве по умолчанию, установленном во время восстановления.</P
></DD
><DT
><TT
CLASS="OPTION"
>--no-unlogged-table-data</TT
></DT
><DD
><P
>Не выгружать содержимое нежурналируемых таблиц. Этот параметр не влияет на то, как выгружаются определения этих таблиц (схема); он отключает только выгрузку данных из них.</P
></DD
><DT
><TT
CLASS="OPTION"
>--quote-all-identifiers</TT
></DT
><DD
><P
>Принудительно экранировать все идентификаторы. Может быть полезно при миграции на новую версию сервера, для избежания конфликтов с новыми резервными словами.</P
></DD
><DT
><TT
CLASS="OPTION"
>--use-set-session-authorization</TT
></DT
><DD
><P
>Выводить команды <TT
CLASS="COMMAND"
>SET SESSION AUTHORIZATION</TT
>, соответствующие стандарту, вместо <TT
CLASS="COMMAND"
>ALTER OWNER</TT
>, для назначения владельцев объектов. В результате выгруженный скрипт будет более стандартизированным, но может не восстановиться корректно, в зависимости от истории объектов.</P
></DD
><DT
><TT
CLASS="OPTION"
>-?</TT
><BR><TT
CLASS="OPTION"
>--help</TT
></DT
><DD
><P
>Показать справку по аргументам командной строки <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> и завершиться.</P
></DD
></DL
></DIV
><P></P
><P
>Далее описаны параметры управления подключением. <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-d <TT
CLASS="REPLACEABLE"
><I
>строка подключения</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--dbname=<TT
CLASS="REPLACEABLE"
><I
>строка подключения</I
></TT
></TT
></DT
><DD
><P
>Указывает параметры подключения к серверу в формате строки подключения. См. <A
HREF="libpq-connect.html#LIBPQ-CONNSTRING"
>Подраздел 31.1.1</A
> для более подробной информации.</P
><P
>Этот параметр называется <TT
CLASS="LITERAL"
>--dbname</TT
> для согласованности с другими клиентскими приложениями, но так как <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> подключается не к одной базе данных, имя базы в строке подключения игнорируется. Чтобы указать имя базы данных, через подключение к которой будут выгружаться глобальные объекты и находиться другие выгружаемые базы, воспользуйтесь параметром <TT
CLASS="LITERAL"
>-l</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>-h <TT
CLASS="REPLACEABLE"
><I
>host</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--host=<TT
CLASS="REPLACEABLE"
><I
>host</I
></TT
></TT
></DT
><DD
><P
>Указывает имя компьютера, на котором запущен сервер баз данных. Если значение начинается с косой черты, оно интерпретируется как имя каталога с доменным сокетом Unix. Значение по умолчанию берётся из переменной окружения <TT
CLASS="ENVAR"
>PGHOST</TT
>, если она установлена. В противном случае выполняется подключение к доменному сокету.</P
></DD
><DT
><TT
CLASS="OPTION"
>-l <TT
CLASS="REPLACEABLE"
><I
>база_данных</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--database=<TT
CLASS="REPLACEABLE"
><I
>база_данных</I
></TT
></TT
></DT
><DD
><P
>Задаёт имя базы данных, через подключение к которой будут выгружаться глобальные объекты и находиться другие выгружаемые базы. По умолчанию используется <TT
CLASS="LITERAL"
>postgres</TT
>, а в случае её отсутствия — <TT
CLASS="LITERAL"
>template1</TT
>.</P
></DD
><DT
><TT
CLASS="OPTION"
>-p <TT
CLASS="REPLACEABLE"
><I
>порт</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--port=<TT
CLASS="REPLACEABLE"
><I
>порт</I
></TT
></TT
></DT
><DD
><P
>Указывает TCP-порт или расширение локального файла Unix-сокета, на котором сервер слушает подключения. По умолчанию берётся значение переменной окружения <TT
CLASS="ENVAR"
>PGPORT</TT
>, если оно установлено, либо значение времени компиляции.</P
></DD
><DT
><TT
CLASS="OPTION"
>-U <TT
CLASS="REPLACEABLE"
><I
>имя_пользователя</I
></TT
></TT
><BR><TT
CLASS="OPTION"
>--username=<TT
CLASS="REPLACEABLE"
><I
>имя_пользователя</I
></TT
></TT
></DT
><DD
><P
>Имя пользователя, под которым производится подключение.</P
></DD
><DT
><TT
CLASS="OPTION"
>-w</TT
><BR><TT
CLASS="OPTION"
>--no-password</TT
></DT
><DD
><P
>Не выдавать запрос на ввод пароля. Если сервер требует аутентификацию по паролю и пароль не доступен с помощью других средств, таких как файл <TT
CLASS="FILENAME"
>.pgpass</TT
>, попытка соединения не удастся. Этот параметр может быть полезен в пакетных заданиях и скриптах, где нет пользователя, который вводит пароль.</P
></DD
><DT
><TT
CLASS="OPTION"
>-W</TT
><BR><TT
CLASS="OPTION"
>--password</TT
></DT
><DD
><P
>Принудительно запрашивать пароль перед подключением к базе данных.</P
><P
>Это несущественный параметр, так как <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> запрашивает пароль автоматически, если сервер проверяет подлинность по паролю. Однако, чтобы понять это, <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> лишний раз подключается к серверу. Поэтому иногда имеет смысл ввести <TT
CLASS="OPTION"
>-W</TT
>, чтобы исключить эту ненужную попытку подключения.</P
><P
>Заметьте, что пароль будет запрашиваться повторно для выгрузки каждой базы данных. Поэтому обычно лучше настроить файл <TT
CLASS="FILENAME"
>~/.pgpass</TT
>, и не вводить пароль каждый раз вручную.</P
></DD
><DT
><TT
CLASS="OPTION"
>--role=<TT
CLASS="REPLACEABLE"
><I
>имя роли</I
></TT
></TT
></DT
><DD
><P
>Задаёт имя роли, которая будет осуществлять выгрузку. Получив это имя, <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> выполнит <TT
CLASS="COMMAND"
>SET ROLE</TT
> <TT
CLASS="REPLACEABLE"
><I
>имя_роли</I
></TT
> после подключения к базе данных. Это полезно, когда проходящий проверку пользователь (указанный в <TT
CLASS="OPTION"
>-U</TT
>) не имеет прав, необходимых для <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
>, но может переключиться на роль, наделённую этими правами. В некоторых окружениях правила запрещают подключаться к серверу непосредственно суперпользователю, и этот параметр позволяет выполнить выгрузку, не нарушая их.</P
></DD
></DL
></DIV
><P></P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN88943"
></A
><H2
>Переменные окружения</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>PGHOST</TT
><BR><TT
CLASS="ENVAR"
>PGOPTIONS</TT
><BR><TT
CLASS="ENVAR"
>PGPORT</TT
><BR><TT
CLASS="ENVAR"
>PGUSER</TT
></DT
><DD
><P
>Параметры подключения по умолчанию</P
></DD
></DL
></DIV
><P
>Эта утилита, как и большинство других утилит <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, также использует переменные среды, поддерживаемые <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> (см. <A
HREF="libpq-envars.html"
>Раздел 31.14</A
>).</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN88961"
></A
><H2
>Замечания</H2
><P
>Так как <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> внутри себя вызывает <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>, часть диагностических сообщений будет относиться к <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
>.</P
><P
>После восстановления имеет смысл запустить <TT
CLASS="COMMAND"
>ANALYZE</TT
> для каждой базы данных, чтобы оптимизатор получил актуальную статистику. Также можно запустить анализ для всех баз данных, выполнив команду <TT
CLASS="COMMAND"
>vacuumdb -a -z</TT
>.</P
><P
>При использовании <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> требуется, чтобы все необходимые каталоги табличных пространств существовали до восстановления; в противном случае, создание баз данных в нестандартном размещении завершится ошибкой.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="APP-PG-DUMPALL-EX"
></A
><H2
>Примеры</H2
><P
>Чтобы выгрузить все базы данных, выполните: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_dumpall &gt; db.out</KBD
></PRE
><P></P
><P
>Загрузить базы данных из этого файла можно так: </P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>psql -f db.out postgres</KBD
></PRE
><P> (К какой базе данных вы подключаетесь, здесь не важно, так как скрипт, созданный утилитой <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
>, будет содержать все команды, требующиеся для создания сохранённых баз данных и подключения к ним.)</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN88983"
></A
><H2
>См. также</H2
><P
>Обратитесь к описанию <A
HREF="app-pgdump.html"
>pg_dump</A
>, чтобы узнать об условиях, при которых могут возникнуть проблемы.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="app-pgdump.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="app-pg-isready.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>pg_dump</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="reference-client.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>pg_isready</SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>