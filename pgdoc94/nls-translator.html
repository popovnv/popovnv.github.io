<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Переводчику</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="Документация по PostgreSQL 9.4.1"
HREF="index.html"><LINK
REL="UP"
TITLE="Языковая поддержка"
HREF="nls.html"><LINK
REL="PREVIOUS"
TITLE="Языковая поддержка"
HREF="nls.html"><LINK
REL="NEXT"
TITLE="Программисту"
HREF="nls-programmer.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"><META
NAME="creation"
CONTENT="2016-04-12T07:56:57"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="4"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>Документация по PostgreSQL 9.4.1</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Языковая поддержка"
HREF="nls.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="nls.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Глава 51. Языковая поддержка</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Программисту"
HREF="nls-programmer.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="NLS-TRANSLATOR"
>51.1. Переводчику</A
></H1
><P
>Программы <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> (серверные и клиентские) могут выдавать сообщения на предпочитаемом вами языке &mdash; если эти сообщения были переведены. Создание и поддержка переведённых наборов сообщений предполагает помощь со стороны людей, которые хорошо говорят на своём языке и хотят сотрудничать с <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>. Для этого совершенно не обязательно быть программистом. В данном разделе объясняется, как можно помочь.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN104942"
>51.1.1. Требования</A
></H2
><P
>Мы не будем оценивать ваши языковые навыки &mdash; данный раздел посвящён средствам программного обеспечения. Теоретически, требуется лишь текстовый редактор. Но, скорее всего, вы захотите проверить свои переведённые сообщения. Когда вы выполняете <TT
CLASS="COMMAND"
>configure</TT
>, обязательно используйте параметр <TT
CLASS="OPTION"
>--enable-nls</TT
>. Это также проверит библиотеку <SPAN
CLASS="APPLICATION"
>libintl</SPAN
> и программу <TT
CLASS="FILENAME"
>msgfmt</TT
>, которые понадобятся всем пользователям в любом случае. Чтобы проверить свою работу, следуйте соответствующим разделам инструкций по установке.</P
><P
>Если вы захотите выполнить перевод или слияние каталога сообщений (описано ниже), вам понадобятся, соответственно, программы <TT
CLASS="FILENAME"
>xgettext</TT
> и <TT
CLASS="FILENAME"
>msgmerge</TT
> в GNU-совместимой реализации. Позднее, мы постараемся сделать так, что если вы будете использовать дистрибутив исходников, вам не понадобится <TT
CLASS="FILENAME"
>xgettext</TT
>. (При работе с Git, вам всё же это будет необходимо). В настоящее время рекомендуется <SPAN
CLASS="APPLICATION"
>GNU Gettext 0.10.36</SPAN
> или более поздняя версия.</P
><P
>К вашей реализации gettext должна прилагаться документация. Некоторая её часть, возможно, будет продублирована ниже, но более подробную информацию следует искать там.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN104955"
>51.1.2. Основные понятия</A
></H2
><P
>Пары оригинальных (английских) сообщений и их (предположительно) переведённых эквивалентов хранятся в <I
CLASS="FIRSTTERM"
>каталогах сообщений</I
>, по одному для каждой программы (хотя связанные программы могут иметь общий каталог) и для каждого языка перевода. Существует два формата, поддерживающих каталоги сообщений: Первый — <SPAN
CLASS="QUOTE"
>"PO"</SPAN
> (Portable Object, переносимый объект), который является простым текстовым файлом с особым синтаксисом, редактируемый переводчиками. Второй — <SPAN
CLASS="QUOTE"
>"MO"</SPAN
> (Machine Object, машинный объект), который является двоичным файлом, генерируемым из соответствующего файла PO, и используется при выполнении интернационализированной программы. Переводчики не работают с файлами MO; фактически с ними едва ли кто-то работает напрямую.</P
><P
>Файл каталога сообщений, как можно было предположить, имеет расширение <TT
CLASS="FILENAME"
>.po</TT
> или <TT
CLASS="FILENAME"
>.mo</TT
>. Базовым именем является либо имя сопровождаемой им программы, либо язык, для которого создан файл, в зависимости от ситуации. Это создаёт некоторую путаницу. Например, <TT
CLASS="FILENAME"
>psql.po</TT
> (файл PO для psql) или <TT
CLASS="FILENAME"
>fr.mo</TT
> (файл MO на французском).</P
><P
>Здесь проиллюстрирован формат файлов PO: </P><PRE
CLASS="PROGRAMLISTING"
># comment

msgid "original string"
msgstr "translated string"

msgid "more original"
msgstr "another translated"
"string can be broken up like this"

...</PRE
><P> Строки msgid извлекаются из исходного кода программы (что необязательно, но это наиболее распространённый способ). Строки msgstr изначально пусты, и переводчик заполняет их переводами. Строки могут содержать экранирующие спецсимволы в стиле С и занимать несколько строк, как в приведённом примере. (Следующая строка должна начинаться с начала строки.)</P
><P
>Символ # обозначает начало комментария. Если сразу за символом # следует пробел, то этим комментарием управляет переводчик. Комментарии также могут быть автоматическими, у которых сразу за # следует символ, отличный от пробела. Они управляются различными инструментами, которые работают с файлами PO и предназначены для переводчиков. </P><PRE
CLASS="PROGRAMLISTING"
>#. automatic comment
#: filename.c:1023
#, flags, flags</PRE
><P> Комментарии в стиле #. извлекаются из исходного файла, где используется сообщение. Возможно, программист вставил информацию для переводчика, например, о предполагаемом выравнивании. Комментарий #: указывает точное место (места), где сообщение используется в исходном коде. Переводчику не нужно смотреть на исходный код программы, но он может это сделать, если сомневается в точности перевода. Комментарии #, содержат флаги, которые некоторым образом описывают сообщение. В настоящее время существует два флага: <TT
CLASS="LITERAL"
>fuzzy</TT
> устанавливается, если сообщение, возможно, стало неактуально по причине изменений в исходном коде программы. Переводчик может проверить это и, возможно, удалить флаг fuzzy. Заметьте, что fuzzy сообщения недоступны конечному пользователю. Другой флаг это <TT
CLASS="LITERAL"
>c-format</TT
>, который указывает, что сообщение является шаблоном формата в стиле <CODE
CLASS="FUNCTION"
>printf</CODE
>. Это означает, что перевод также должен быть строкой формата с таким же количеством и типом "заполнителей". Существуют средства, которые распознают и проверяют флаги c-format.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN104973"
>51.1.3. Создание и управление каталогами сообщений</A
></H2
><P
>Итак, как же создать <SPAN
CLASS="QUOTE"
>"blank"</SPAN
> каталог сообщений? Во-первых, зайдите в каталог, содержащий программу, сообщения которой необходимо перевести. Если имеется файл <TT
CLASS="FILENAME"
>nls.mk</TT
>, данная программа подготовлена к переводу.</P
><P
>Если уже есть некоторые <TT
CLASS="FILENAME"
>.po</TT
> файлы, то кто-то уже занимался переводом. Файлы получают имя <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>language</I
></TT
>.po</TT
>, где <TT
CLASS="REPLACEABLE"
><I
>language</I
></TT
> это <A
HREF="http://www.loc.gov/standards/iso639-2/php/English_list.php"
TARGET="_top"
> двухбуквенный языковой код ISO 639-1 (в нижнем регистре)</A
>, например, <TT
CLASS="FILENAME"
>fr.po</TT
> для французского. Если требуется больше одного перевода на какой-либо язык, файлы могут также быть названы <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>language</I
></TT
>_<TT
CLASS="REPLACEABLE"
><I
>region</I
></TT
>.po</TT
>, где <TT
CLASS="REPLACEABLE"
><I
>region</I
></TT
> это <A
HREF="http://www.iso.org/iso/country_names_and_code_elements"
TARGET="_top"
> двухбуквенный код страны ISO 3166-1 (в верхнем регистре)</A
>, например, <TT
CLASS="FILENAME"
>pt_BR.po</TT
> для португальского в Бразилии. Если найден необходимый язык, можно просто начать работать над этим файлом.</P
><P
>Если необходимо начать новый перевод, сначала выполните команду: </P><PRE
CLASS="PROGRAMLISTING"
>make init-po</PRE
><P> В результате будет создан файл <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>progname</I
></TT
>.pot</TT
>. (<TT
CLASS="FILENAME"
>.pot</TT
>, чтобы отличать его от файлов PO, находящихся <SPAN
CLASS="QUOTE"
>"в эксплуатации"</SPAN
>. <TT
CLASS="LITERAL"
>T</TT
> означает <SPAN
CLASS="QUOTE"
>"шаблон"</SPAN
>.) Скопируйте данный файл в <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>language</I
></TT
>.po</TT
> и редактируйте его. Чтобы сообщить о том, что новый язык доступен, также редактируйте файл <TT
CLASS="FILENAME"
>nls.mk</TT
> и добавляйте языковой код (или код языка и страны) к строке, которая выглядит следующим образом: </P><PRE
CLASS="PROGRAMLISTING"
>AVAIL_LANGUAGES := de fr</PRE
><P> (Конечно, и другие языки могут появиться.)</P
><P
>По мере развития базовой программы или библиотеки, сообщения могут быть изменены или добавлены программистами. В этом случае нет необходимости начинать с нуля. Вместо этого выполните команду: </P><PRE
CLASS="PROGRAMLISTING"
>make update-po</PRE
><P> что создаст новый пустой файл каталога сообщений (файл с расширением pot, с которого вы начали) и объединит его с существующими файлами PO. Если алгоритм слияния не распознаёт конкретное сообщение, он ставит пометку <SPAN
CLASS="QUOTE"
>"fuzzy"</SPAN
>, как говорилось выше. Новый файл PO сохраняется с расширением <TT
CLASS="FILENAME"
>.po.new</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN105007"
>51.1.4. Редактирование файлов PO</A
></H2
><P
>Файлы PO можно редактировать при помощи обычного текстового редактора. Переводчику нужно лишь вставить перевод между кавычками после директивы msgstr, добавить комментарии и изменить флаг fuzzy. Существует также режим PO для Emacs, который представляется довольно полезным.</P
><P
>Файлы PO не обязательно должны быть полностью заполнены. Программа автоматически вернётся к использованию исходной строки, если перевод недоступен (или отсутствует). Вы вполне можете предлагать для включения в исходный код неполный перевод; это даст возможность другим продолжить работу над ним. Однако после слияния рекомендуется в первую очередь удалить ненужные неточные соответствия. Помните, что неточные соответствия в итоге не будут использоваться, они могут лишь подсказывать, каким мог бы быть перевод похожей строки.</P
><P
>Ниже описаны моменты, которые следует учитывать при редактировании переводов: <P
></P
></P><UL
><LI
><P
>Если оригинал заканчивается переводом строки, важно, чтобы это было отражено и в переводе. То же относится к табуляции, и т. п.</P
></LI
><LI
><P
>Если оригиналом является строка форматирования <CODE
CLASS="FUNCTION"
>printf</CODE
>, то перевод должен иметь такой же вид. Перевод также должен иметь те же спецификаторы формата в том же порядке. Иногда правила языка таковы, что это невозможно или как минимум нелепо. В таком случае можно модифицировать спецификаторы формата подобным образом: </P><PRE
CLASS="PROGRAMLISTING"
>msgstr "Die Datei %2$s hat %1$u Zeichen."</PRE
><P> Тогда первый заполнитель просто использует второй аргумент из списка.<TT
CLASS="LITERAL"
><TT
CLASS="REPLACEABLE"
><I
>digits</I
></TT
>$</TT
> должен стоять сразу за % до любых других модификаторов формата. (Эта возможность действительно существует в семействе функций <CODE
CLASS="FUNCTION"
>printf</CODE
>. Вы, возможно, не слышали о ней раньше, потому что она мало используется где-либо кроме интернационализации сообщений.)</P
></LI
><LI
><P
>Если исходная строка содержит лингвистическую ошибку, сообщите об этом (или исправьте самостоятельно в исходном коде программы) и переведите правильно. Верная строка может быть добавлена, когда исходный программный код будет обновлен. Если исходная строка содержит фактическую ошибку, сообщите об этом (или исправьте самостоятельно) и не переводите её. Вместо этого, можно отметить строку, оставив комментарий в файле PO.</P
></LI
><LI
><P
>Сохраняйте стиль и тон исходной строки. В частности, сообщения, не являющиеся предложениями (<TT
CLASS="LITERAL"
>cannot open file %s</TT
>), вероятно, не следует начинать с заглавной буквы (если в вашем языке есть разделение на регистры) или заканчивать точкой (если в вашем языке используются знаки препинания). Дополнительно см. <A
HREF="error-style-guide.html"
>Раздел 50.3</A
>.</P
></LI
><LI
><P
>Если вы не знаете, что означает какое-либо сообщение, или если оно допускает двоякое толкование, обратитесь за помощью через список рассылки разработчиков. По всей вероятности, англоговорящие пользователи могут также его не понять или найти двусмысленным, поэтому лучше исправить это сообщение.</P
></LI
></UL
><P></P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="nls.html"
ACCESSKEY="P"
>Пред.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Начало</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="nls-programmer.html"
ACCESSKEY="N"
>След.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Языковая поддержка</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="nls.html"
ACCESSKEY="U"
>Уровень выше</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Программисту</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>